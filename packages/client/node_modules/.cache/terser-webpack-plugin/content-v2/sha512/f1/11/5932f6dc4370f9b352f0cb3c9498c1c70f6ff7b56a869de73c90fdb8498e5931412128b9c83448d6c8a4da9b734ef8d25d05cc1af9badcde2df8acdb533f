{"code":"(this[\"webpackJsonp@whatsapp-clone/client\"]=this[\"webpackJsonp@whatsapp-clone/client\"]||[]).push([[0],{330:function(e,t,s){\"use strict\";s.r(t);var n=s(343),c=s(58),r=s(0),o=s.n(r),a=s(94),i=s.n(a),l=s(128),j=s(10),d=s(4);const{createContext:b,useState:u,useEffect:O}=s(0),m=b();var h=e=>{let{children:t}=e;const[s,n]=u({loggedIn:null,token:localStorage.getItem(\"token\")}),c=Object(j.useNavigate)();return O((()=>{fetch(\"\".concat(Object({NODE_ENV:\"production\",PUBLIC_URL:\"\",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL,\"/auth/login\"),{credentials:\"include\",headers:{authorization:\"Bearer \".concat(s.token)}}).catch((e=>{n({loggedIn:!1})})).then((e=>{if(e&&e.ok&&!(e.status>=400))return e.json();n({loggedIn:!1})})).then((e=>{e?(n({...e}),c(\"/home\")):n({loggedIn:!1})}))}),[]),Object(d.jsx)(m.Provider,{value:{user:s,setUser:n},children:t})},x=s(59),g=s(342),p=s(72);var f=()=>{const{colorMode:e,toggleColorMode:t}=Object(g.a)();return Object(d.jsx)(x.a,{onClick:()=>t(),pos:\"absolute\",top:\"0\",right:\"0\",m:\"1rem\",children:\"dark\"===e?Object(d.jsx)(p.d,{color:\"orange.200\"}):Object(d.jsx)(p.c,{color:\"blue.700\"})})},S=s(20),C=s(50),v=s(174);var _=e=>new v.a(Object({NODE_ENV:\"production\",PUBLIC_URL:\"\",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL,{autoConnect:!1,withCredentials:!0,auth:{token:e.token}}),E=s(78),R=s(31),T=s(115);var y=e=>{let{userid:t}=e;const{setMessages:s}=Object(r.useContext)(H),{socket:n}=Object(r.useContext)(M);return Object(d.jsx)(R.c,{initialValues:{message:\"\"},validationSchema:T.object({message:T.string().min(1).max(255)}),onSubmit:(e,c)=>{const r={to:t,from:null,content:e.message};n.emit(\"dm\",r),s((e=>[r,...e])),c.resetForm()},children:Object(d.jsxs)(S.e,{as:R.b,w:\"100%\",pb:\"1.4rem\",px:\"1.4rem\",children:[Object(d.jsx)(E.a,{as:R.a,name:\"message\",placeholder:\"Type message here..\",size:\"lg\",autoComplete:\"off\"}),Object(d.jsx)(x.a,{type:\"submit\",size:\"lg\",colorScheme:\"teal\",children:\"Send\"})]})})};var w=e=>{let{userid:t}=e;const{friendList:s}=Object(r.useContext)(D),{messages:n}=Object(r.useContext)(H),c=Object(r.useRef)(null);return Object(r.useEffect)((()=>{var e;null===(e=c.current)||void 0===e||e.scrollIntoView()})),s.length>0?Object(d.jsxs)(S.h,{h:\"100%\",justify:\"end\",children:[Object(d.jsx)(C.d,{overflowY:\"scroll\",children:s.map((e=>Object(d.jsxs)(S.h,{flexDir:\"column-reverse\",as:C.c,w:\"100%\",children:[Object(d.jsx)(\"div\",{ref:c}),n.filter((t=>t.to===e.userid||t.from===e.userid)).map(((t,s)=>Object(d.jsx)(S.g,{m:t.to===e.userid?\"1rem 0 0 auto !important\":\"1rem auto 0 0 !important\",maxW:\"50%\",fontSize:\"lg\",bg:t.to===e.userid?\"blue.100\":\"gray.100\",color:\"gray.800\",borderRadius:\"10px\",p:\"0.5rem 1rem\",children:t.content},\"msg:\".concat(e.username,\".\").concat(s))))]},\"chat:\".concat(e.username))))}),Object(d.jsx)(y,{userid:t})]}):Object(d.jsx)(S.h,{justify:\"center\",pt:\"5rem\",w:\"100%\",textAlign:\"center\",fontSize:\"lg\",children:Object(d.jsx)(C.d,{children:Object(d.jsx)(C.c,{children:Object(d.jsx)(S.g,{children:\"No friend :( Click add friend to start chatting\"})})})})},P=s(19),k=s(55),I=s(81),U=s(64);var F=e=>{let{label:t,...s}=e;const[n,c]=Object(R.d)(s);return Object(d.jsxs)(U.a,{isInvalid:c.touched&&c.error,children:[Object(d.jsx)(U.c,{children:t}),Object(d.jsx)(E.a,{as:R.a,...n,...s}),Object(d.jsx)(U.b,{children:c.error})]})};var A=e=>{let{isOpen:t,onClose:s}=e;const[n,c]=Object(r.useState)(\"\"),o=Object(r.useCallback)((()=>{c(\"\"),s()}),[s]),{setFriendList:a}=Object(r.useContext)(D),{socket:i}=Object(r.useContext)(M);return Object(d.jsxs)(k.a,{isOpen:t,onClose:o,children:[Object(d.jsx)(k.g,{}),Object(d.jsxs)(k.d,{children:[Object(d.jsx)(k.f,{children:\"Add a friend!\"}),Object(d.jsx)(k.c,{}),Object(d.jsx)(R.c,{initialValues:{friendName:\"\"},onSubmit:e=>{i.emit(\"add_friend\",e.friendName,(e=>{let{errorMsg:t,done:s,newFriend:n}=e;if(s)return a((e=>[n,...e])),void o();c(t)}))},validationSchema:I.friendSchema,children:Object(d.jsxs)(R.b,{children:[Object(d.jsxs)(k.b,{children:[Object(d.jsx)(S.f,{fontSize:\"xl\",color:\"red.500\",textAlign:\"center\",children:n}),Object(d.jsx)(F,{label:\"Friend's name\",placeholder:\"Enter friend's username..\",autoComplete:\"off\",name:\"friendName\"})]}),Object(d.jsx)(k.e,{children:Object(d.jsx)(x.a,{colorScheme:\"blue\",type:\"submit\",children:\"Submit\"})})]})})]})]})};var N=()=>{const{friendList:e}=Object(r.useContext)(D),{isOpen:t,onOpen:s,onClose:n}=Object(P.d)();return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(S.h,{py:\"1.4rem\",children:[Object(d.jsxs)(S.e,{justify:\"space-evenly\",w:\"100%\",children:[Object(d.jsx)(S.f,{size:\"md\",children:\"Add Friend\"}),Object(d.jsx)(x.a,{onClick:s,children:Object(d.jsx)(p.b,{})})]}),Object(d.jsx)(S.b,{}),Object(d.jsx)(S.h,{as:C.b,children:e.map((e=>Object(d.jsxs)(S.e,{as:C.a,children:[Object(d.jsx)(S.a,{bg:\"\"+e.connected===\"true\"?\"green.700\":\"red.500\",w:\"20px\",h:\"20px\"}),Object(d.jsx)(S.g,{children:e.username})]},\"friend:\".concat(e))))})]}),Object(d.jsx)(A,{isOpen:t,onClose:n})]})};var L=(e,t,s)=>{const{setUser:n}=Object(r.useContext)(m);Object(r.useEffect)((()=>(s.connect(),s.on(\"friends\",(t=>{e(t)})),s.on(\"messages\",(e=>{t(e)})),s.on(\"dm\",(e=>{t((t=>[e,...t]))})),s.on(\"connected\",((t,s)=>{e((e=>[...e].map((e=>(e.username===s&&(e.connected=t),e)))))})),s.on(\"connect_error\",(()=>{n({loggedIn:!1})})),()=>{s.off(\"connect_error\"),s.off(\"connected\"),s.off(\"friends\"),s.off(\"messages\"),s.off(\"dm\")})),[n,e,t,s])};const D=Object(r.createContext)(),H=Object(r.createContext)(),M=Object(r.createContext)();var W=()=>{var e;const[t,s]=Object(r.useState)([]),[n,c]=Object(r.useState)([]),[o,a]=Object(r.useState)(0),{user:i}=Object(r.useContext)(m),[l,j]=Object(r.useState)((()=>_(i)));return Object(r.useEffect)((()=>{j((()=>_(i)))}),[i]),L(s,c,l),Object(d.jsx)(D.Provider,{value:{friendList:t,setFriendList:s},children:Object(d.jsx)(M.Provider,{value:{socket:l},children:Object(d.jsxs)(S.c,{templateColumns:\"repeat(10, 1fr)\",h:\"100vh\",as:C.e,onChange:e=>a(e),children:[Object(d.jsx)(S.d,{colSpan:\"3\",borderRight:\"1px solid gray\",children:Object(d.jsx)(N,{})}),Object(d.jsx)(S.d,{colSpan:\"7\",maxH:\"100vh\",children:Object(d.jsx)(H.Provider,{value:{messages:n,setMessages:c},children:Object(d.jsx)(w,{userid:null===(e=t[o])||void 0===e?void 0:e.userid})})})]})})})};var K=()=>{const{setUser:e}=Object(r.useContext)(m),[t,s]=Object(r.useState)(null),n=Object(j.useNavigate)();return Object(d.jsx)(R.c,{initialValues:{username:\"\",password:\"\"},validationSchema:I.formSchema,onSubmit:(t,c)=>{const r={...t};c.resetForm(),fetch(\"\".concat(Object({NODE_ENV:\"production\",PUBLIC_URL:\"\",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL,\"/auth/login\"),{method:\"POST\",credentials:\"include\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(r)}).catch((e=>{})).then((e=>{if(e&&e.ok&&!(e.status>=400))return e.json()})).then((t=>{t&&(e({...t}),t.status?s(t.status):t.loggedIn&&(localStorage.setItem(\"token\",t.token),n(\"/home\")))}))},children:Object(d.jsxs)(S.h,{as:R.b,w:{base:\"90%\",md:\"500px\"},m:\"auto\",justify:\"center\",h:\"100vh\",spacing:\"1rem\",children:[Object(d.jsx)(S.f,{children:\"Log In\"}),Object(d.jsx)(S.g,{as:\"p\",color:\"red.500\",children:t}),Object(d.jsx)(F,{name:\"username\",placeholder:\"Enter username\",autoComplete:\"off\",label:\"Username\"}),Object(d.jsx)(F,{name:\"password\",placeholder:\"Enter password\",autoComplete:\"off\",label:\"Password\",type:\"password\"}),Object(d.jsxs)(x.b,{pt:\"1rem\",children:[Object(d.jsx)(x.a,{colorScheme:\"teal\",type:\"submit\",children:\"Log In\"}),Object(d.jsx)(x.a,{onClick:()=>n(\"/register\"),children:\"Create Account\"})]})]})})};var V=()=>{const{setUser:e}=Object(r.useContext)(m),[t,s]=Object(r.useState)(null),n=Object(j.useNavigate)();return Object(d.jsx)(R.c,{initialValues:{username:\"\",password:\"\"},validationSchema:I.formSchema,onSubmit:(t,c)=>{const r={...t};c.resetForm(),fetch(\"\".concat(Object({NODE_ENV:\"production\",PUBLIC_URL:\"\",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL,\"/auth/signup\"),{method:\"POST\",credentials:\"include\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(r)}).catch((e=>{})).then((e=>{if(e&&e.ok&&!(e.status>=400))return e.json()})).then((t=>{t&&(e({...t}),t.status?s(t.status):t.loggedIn&&(localStorage.setItem(\"token\",t.token),n(\"/home\")))}))},children:Object(d.jsxs)(S.h,{as:R.b,w:{base:\"90%\",md:\"500px\"},m:\"auto\",justify:\"center\",h:\"100vh\",spacing:\"1rem\",children:[Object(d.jsx)(S.f,{children:\"Sign Up\"}),Object(d.jsx)(S.g,{as:\"p\",color:\"red.500\",children:t}),Object(d.jsx)(F,{name:\"username\",placeholder:\"Enter username\",autoComplete:\"off\",label:\"Username\"}),Object(d.jsx)(F,{name:\"password\",placeholder:\"Enter password\",autoComplete:\"off\",label:\"Password\",type:\"password\"}),Object(d.jsxs)(x.b,{pt:\"1rem\",children:[Object(d.jsx)(x.a,{colorScheme:\"teal\",type:\"submit\",children:\"Create Account\"}),Object(d.jsx)(x.a,{onClick:()=>n(\"/\"),leftIcon:Object(d.jsx)(p.a,{}),children:\"Back\"})]})]})})};const{Outlet:z,Navigate:B}=s(10);var q=()=>(()=>{const{user:e}=Object(r.useContext)(m);return e&&e.loggedIn})()?Object(d.jsx)(z,{}):Object(d.jsx)(B,{to:\"/\"});var J=()=>{const{user:e}=Object(r.useContext)(m);return null===e.loggedIn?Object(d.jsx)(S.g,{children:\"Loading...\"}):Object(d.jsxs)(j.Routes,{children:[Object(d.jsx)(j.Route,{path:\"/\",element:Object(d.jsx)(K,{})}),Object(d.jsx)(j.Route,{path:\"/register\",element:Object(d.jsx)(V,{})}),Object(d.jsx)(j.Route,{element:Object(d.jsx)(q,{}),children:Object(d.jsx)(j.Route,{path:\"/home\",element:Object(d.jsx)(W,{})})}),Object(d.jsx)(j.Route,{path:\"*\",element:Object(d.jsx)(K,{})})]})};var Y=function(){return Object(d.jsxs)(h,{children:[Object(d.jsx)(J,{}),Object(d.jsx)(f,{})]})};var G=Object(c.b)({config:{intialColorMode:\"dark\",useSystemColorMode:!0},styles:{global:{body:{margin:0,fontFamily:\"-apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen','Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',sans-serif\",WebKitFontSmoothing:\"antialiased\",MozOsxFontSmoothing:\"grayscale\"},code:{fontFamily:\"source-code-pro, Menlo, Monaco, Consolas, 'Courier New',monospace\"}}}});i.a.render(Object(d.jsx)(o.a.StrictMode,{children:Object(d.jsx)(l.a,{children:Object(d.jsxs)(c.a,{theme:G,children:[Object(d.jsx)(n.a,{initialColorMode:G.config.initialColorMode}),Object(d.jsx)(Y,{})]})})}),document.getElementById(\"root\"))},81:function(e,t,s){const n=s(115),c=n.object({username:n.string().required(\"Username required\").min(6,\"Username too short\").max(28,\"Username too long!\"),password:n.string().required(\"Password required\").min(6,\"Password too short\").max(28,\"Password too long!\")}),r=n.object({friendName:n.string().required(\"Username required\").min(6,\"Invalid username!\").max(28,\"Invalid username!\")});e.exports={formSchema:c,friendSchema:r}}},[[330,1,2]]]);","name":"static/js/main.d6ebc659.chunk.js","map":{"version":3,"sources":["static/js/main.d6ebc659.chunk.js"],"names":["this","push","module","__webpack_exports__","__webpack_require__","r","chunk_WP4V2BSL","chakra_ui_react_esm","react","react_default","n","react_dom","react_dom_default","react_router_dom","react_router","jsx_runtime","createContext","useState","useEffect","AccountContext","components_AccountContext","_ref","children","user","setUser","loggedIn","token","localStorage","getItem","navigate","Object","fetch","concat","NODE_ENV","PUBLIC_URL","WDS_SOCKET_HOST","undefined","WDS_SOCKET_PATH","WDS_SOCKET_PORT","FAST_REFRESH","REACT_APP_SERVER_URL","credentials","headers","authorization","catch","err","then","ok","status","json","data","Provider","value","chakra_ui_button_esm","chunk_UQDW7KKV","chakra_ui_icons_esm","components_ToggleColorMode","colorMode","toggleColorMode","onClick","pos","top","right","m","color","chakra_ui_layout_esm","chakra_ui_tabs_esm","esm","src_socket","autoConnect","withCredentials","auth","chakra_ui_input_esm","formik_esm","es","Home_ChatBox","userid","setMessages","MessagesContext","socket","SocketContext","initialValues","message","validationSchema","min","max","onSubmit","values","actions","to","from","content","emit","prevMsgs","resetForm","as","w","pb","px","name","placeholder","size","autoComplete","type","colorScheme","Home_Chat","friendList","FriendContext","messages","bottomDiv","_bottomDiv$current","current","scrollIntoView","length","h","justify","overflowY","map","friend","flexDir","ref","filter","msg","idx","maxW","fontSize","bg","borderRadius","p","username","pt","textAlign","chakra_ui_hooks_esm","chakra_ui_modal_esm","common","chakra_ui_form_control_esm","components_TextField","label","props","field","meta","isInvalid","touched","error","Home_AddFriendModal","isOpen","onClose","setError","closeModal","setFriendList","friendName","_ref2","errorMsg","done","newFriend","c","Home_Sidebar","onOpen","py","connected","Home_useSocketSetup","connect","on","prevFriends","off","Home_Home","_friendList$friendInd","friendIndex","setFriendIndex","setSocket","templateColumns","onChange","index","colSpan","borderRight","maxH","Login_Login","password","vals","method","body","JSON","stringify","res","setItem","base","md","spacing","Login_SignUp","leftIcon","Outlet","Navigate","components_PrivateRoutes","useAuth","components_Views","path","element","src_App","src_theme","config","intialColorMode","useSystemColorMode","styles","global","margin","fontFamily","WebKitFontSmoothing","MozOsxFontSmoothing","code","a","render","StrictMode","theme","initialColorMode","document","getElementById","exports","Yup","formSchema","object","string","required","friendSchema"],"mappings":"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"},"input":"(this[\"webpackJsonp@whatsapp-clone/client\"] = this[\"webpackJsonp@whatsapp-clone/client\"] || []).push([[0],{\n\n/***/ 330:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: /Users/apankov/Documents/WEB_Projects/messenger/node_modules/@chakra-ui/color-mode/dist/chunk-WP4V2BSL.mjs\nvar chunk_WP4V2BSL = __webpack_require__(343);\n\n// EXTERNAL MODULE: /Users/apankov/Documents/WEB_Projects/messenger/node_modules/@chakra-ui/react/dist/chakra-ui-react.esm.js + 18 modules\nvar chakra_ui_react_esm = __webpack_require__(58);\n\n// EXTERNAL MODULE: /Users/apankov/Documents/WEB_Projects/messenger/node_modules/react/index.js\nvar react = __webpack_require__(0);\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: /Users/apankov/Documents/WEB_Projects/messenger/node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(94);\nvar react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);\n\n// EXTERNAL MODULE: /Users/apankov/Documents/WEB_Projects/messenger/node_modules/react-router-dom/index.js\nvar react_router_dom = __webpack_require__(128);\n\n// EXTERNAL MODULE: /Users/apankov/Documents/WEB_Projects/messenger/node_modules/react-router/index.js\nvar react_router = __webpack_require__(10);\n\n// EXTERNAL MODULE: /Users/apankov/Documents/WEB_Projects/messenger/node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(4);\n\n// CONCATENATED MODULE: ./src/components/AccountContext.jsx\nconst{createContext,useState,useEffect}=__webpack_require__(0);const AccountContext=createContext();const UserContext=_ref=>{let{children}=_ref;const[user,setUser]=useState({loggedIn:null,token:localStorage.getItem(\"token\")});const navigate=Object(react_router[\"useNavigate\"])();useEffect(()=>{fetch(\"\".concat(Object({\"NODE_ENV\":\"production\",\"PUBLIC_URL\":\"\",\"WDS_SOCKET_HOST\":undefined,\"WDS_SOCKET_PATH\":undefined,\"WDS_SOCKET_PORT\":undefined,\"FAST_REFRESH\":true}).REACT_APP_SERVER_URL,\"/auth/login\"),{credentials:\"include\",headers:{authorization:\"Bearer \".concat(user.token)}}).catch(err=>{setUser({loggedIn:false});return;}).then(r=>{if(!r||!r.ok||r.status>=400){setUser({loggedIn:false});return;}return r.json();}).then(data=>{if(!data){setUser({loggedIn:false});return;}setUser({...data});navigate(\"/home\");});// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AccountContext.Provider,{value:{user,setUser},children:children});};/* harmony default export */ var components_AccountContext = (UserContext);\n// EXTERNAL MODULE: /Users/apankov/Documents/WEB_Projects/messenger/node_modules/@chakra-ui/button/dist/chakra-ui-button.esm.js\nvar chakra_ui_button_esm = __webpack_require__(59);\n\n// EXTERNAL MODULE: /Users/apankov/Documents/WEB_Projects/messenger/node_modules/@chakra-ui/color-mode/dist/chunk-UQDW7KKV.mjs\nvar chunk_UQDW7KKV = __webpack_require__(342);\n\n// EXTERNAL MODULE: /Users/apankov/Documents/WEB_Projects/messenger/node_modules/@chakra-ui/icons/dist/chakra-ui-icons.esm.js\nvar chakra_ui_icons_esm = __webpack_require__(72);\n\n// CONCATENATED MODULE: ./src/components/ToggleColorMode.jsx\nconst ToggleColorMode=()=>{const{colorMode,toggleColorMode}=Object(chunk_UQDW7KKV[\"a\" /* useColorMode */])();return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(chakra_ui_button_esm[\"a\" /* Button */],{onClick:()=>toggleColorMode(),pos:\"absolute\",top:\"0\",right:\"0\",m:\"1rem\",children:colorMode===\"dark\"?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(chakra_ui_icons_esm[\"d\" /* SunIcon */],{color:\"orange.200\"}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(chakra_ui_icons_esm[\"c\" /* MoonIcon */],{color:\"blue.700\"})});};/* harmony default export */ var components_ToggleColorMode = (ToggleColorMode);\n// EXTERNAL MODULE: /Users/apankov/Documents/WEB_Projects/messenger/node_modules/@chakra-ui/layout/dist/chakra-ui-layout.esm.js\nvar chakra_ui_layout_esm = __webpack_require__(20);\n\n// EXTERNAL MODULE: /Users/apankov/Documents/WEB_Projects/messenger/node_modules/@chakra-ui/tabs/dist/chakra-ui-tabs.esm.js + 2 modules\nvar chakra_ui_tabs_esm = __webpack_require__(50);\n\n// EXTERNAL MODULE: /Users/apankov/Documents/WEB_Projects/messenger/node_modules/socket.io-client/build/esm/index.js + 13 modules\nvar esm = __webpack_require__(174);\n\n// CONCATENATED MODULE: ./src/socket.js\nconst socket_socket=user=>new esm[\"a\" /* io */](Object({\"NODE_ENV\":\"production\",\"PUBLIC_URL\":\"\",\"WDS_SOCKET_HOST\":undefined,\"WDS_SOCKET_PATH\":undefined,\"WDS_SOCKET_PORT\":undefined,\"FAST_REFRESH\":true}).REACT_APP_SERVER_URL,{autoConnect:false,withCredentials:true,auth:{token:user.token}});/* harmony default export */ var src_socket = (socket_socket);\n// EXTERNAL MODULE: /Users/apankov/Documents/WEB_Projects/messenger/node_modules/@chakra-ui/input/dist/chakra-ui-input.esm.js\nvar chakra_ui_input_esm = __webpack_require__(78);\n\n// EXTERNAL MODULE: /Users/apankov/Documents/WEB_Projects/messenger/node_modules/formik/dist/formik.esm.js + 115 modules\nvar formik_esm = __webpack_require__(31);\n\n// EXTERNAL MODULE: /Users/apankov/Documents/WEB_Projects/messenger/node_modules/yup/es/index.js + 26 modules\nvar es = __webpack_require__(115);\n\n// CONCATENATED MODULE: ./src/components/Home/ChatBox.jsx\nconst ChatBox=_ref=>{let{userid}=_ref;const{setMessages}=Object(react[\"useContext\"])(MessagesContext);const{socket}=Object(react[\"useContext\"])(SocketContext);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(formik_esm[\"c\" /* Formik */],{initialValues:{message:\"\"},validationSchema:es[\"object\"]({message:es[\"string\"]().min(1).max(255)}),onSubmit:(values,actions)=>{const message={to:userid,from:null,content:values.message};socket.emit(\"dm\",message);setMessages(prevMsgs=>[message,...prevMsgs]);actions.resetForm();},children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(chakra_ui_layout_esm[\"e\" /* HStack */],{as:formik_esm[\"b\" /* Form */],w:\"100%\",pb:\"1.4rem\",px:\"1.4rem\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(chakra_ui_input_esm[\"a\" /* Input */],{as:formik_esm[\"a\" /* Field */],name:\"message\",placeholder:\"Type message here..\",size:\"lg\",autoComplete:\"off\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(chakra_ui_button_esm[\"a\" /* Button */],{type:\"submit\",size:\"lg\",colorScheme:\"teal\",children:\"Send\"})]})});};/* harmony default export */ var Home_ChatBox = (ChatBox);\n// CONCATENATED MODULE: ./src/components/Home/Chat.jsx\nconst Chat=_ref=>{let{userid}=_ref;const{friendList}=Object(react[\"useContext\"])(FriendContext);const{messages}=Object(react[\"useContext\"])(MessagesContext);const bottomDiv=Object(react[\"useRef\"])(null);Object(react[\"useEffect\"])(()=>{var _bottomDiv$current;(_bottomDiv$current=bottomDiv.current)===null||_bottomDiv$current===void 0?void 0:_bottomDiv$current.scrollIntoView();});return friendList.length>0?/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(chakra_ui_layout_esm[\"h\" /* VStack */],{h:\"100%\",justify:\"end\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(chakra_ui_tabs_esm[\"d\" /* TabPanels */],{overflowY:\"scroll\",children:friendList.map(friend=>/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(chakra_ui_layout_esm[\"h\" /* VStack */],{flexDir:\"column-reverse\",as:chakra_ui_tabs_esm[\"c\" /* TabPanel */],w:\"100%\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{ref:bottomDiv}),messages.filter(msg=>msg.to===friend.userid||msg.from===friend.userid).map((message,idx)=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(chakra_ui_layout_esm[\"g\" /* Text */],{m:message.to===friend.userid?\"1rem 0 0 auto !important\":\"1rem auto 0 0 !important\",maxW:\"50%\",fontSize:\"lg\",bg:message.to===friend.userid?\"blue.100\":\"gray.100\",color:\"gray.800\",borderRadius:\"10px\",p:\"0.5rem 1rem\",children:message.content},\"msg:\".concat(friend.username,\".\").concat(idx)))]},\"chat:\".concat(friend.username)))}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Home_ChatBox,{userid:userid})]}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(chakra_ui_layout_esm[\"h\" /* VStack */],{justify:\"center\",pt:\"5rem\",w:\"100%\",textAlign:\"center\",fontSize:\"lg\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(chakra_ui_tabs_esm[\"d\" /* TabPanels */],{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(chakra_ui_tabs_esm[\"c\" /* TabPanel */],{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(chakra_ui_layout_esm[\"g\" /* Text */],{children:\"No friend :( Click add friend to start chatting\"})})})});};/* harmony default export */ var Home_Chat = (Chat);\n// EXTERNAL MODULE: /Users/apankov/Documents/WEB_Projects/messenger/node_modules/@chakra-ui/hooks/dist/chakra-ui-hooks.esm.js\nvar chakra_ui_hooks_esm = __webpack_require__(19);\n\n// EXTERNAL MODULE: /Users/apankov/Documents/WEB_Projects/messenger/node_modules/@chakra-ui/modal/dist/chakra-ui-modal.esm.js + 58 modules\nvar chakra_ui_modal_esm = __webpack_require__(55);\n\n// EXTERNAL MODULE: ../common/index.js\nvar common = __webpack_require__(81);\n\n// EXTERNAL MODULE: /Users/apankov/Documents/WEB_Projects/messenger/node_modules/@chakra-ui/form-control/dist/chakra-ui-form-control.esm.js\nvar chakra_ui_form_control_esm = __webpack_require__(64);\n\n// CONCATENATED MODULE: ./src/components/TextField.jsx\nconst TextField=_ref=>{let{label,...props}=_ref;const[field,meta]=Object(formik_esm[\"d\" /* useField */])(props);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(chakra_ui_form_control_esm[\"a\" /* FormControl */],{isInvalid:meta.touched&&meta.error,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(chakra_ui_form_control_esm[\"c\" /* FormLabel */],{children:label}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(chakra_ui_input_esm[\"a\" /* Input */],{as:formik_esm[\"a\" /* Field */],...field,...props}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(chakra_ui_form_control_esm[\"b\" /* FormErrorMessage */],{children:meta.error})]});};/* harmony default export */ var components_TextField = (TextField);\n// CONCATENATED MODULE: ./src/components/Home/AddFriendModal.jsx\nconst AddFriendModal=_ref=>{let{isOpen,onClose}=_ref;const[error,setError]=Object(react[\"useState\"])(\"\");const closeModal=Object(react[\"useCallback\"])(()=>{setError(\"\");onClose();},[onClose]);const{setFriendList}=Object(react[\"useContext\"])(FriendContext);const{socket}=Object(react[\"useContext\"])(SocketContext);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(chakra_ui_modal_esm[\"a\" /* Modal */],{isOpen:isOpen,onClose:closeModal,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(chakra_ui_modal_esm[\"g\" /* ModalOverlay */],{}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(chakra_ui_modal_esm[\"d\" /* ModalContent */],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(chakra_ui_modal_esm[\"f\" /* ModalHeader */],{children:\"Add a friend!\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(chakra_ui_modal_esm[\"c\" /* ModalCloseButton */],{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(formik_esm[\"c\" /* Formik */],{initialValues:{friendName:\"\"},onSubmit:values=>{socket.emit(\"add_friend\",values.friendName,_ref2=>{let{errorMsg,done,newFriend}=_ref2;if(done){setFriendList(c=>[newFriend,...c]);closeModal();return;}setError(errorMsg);});},validationSchema:common[\"friendSchema\"],children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(formik_esm[\"b\" /* Form */],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(chakra_ui_modal_esm[\"b\" /* ModalBody */],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(chakra_ui_layout_esm[\"f\" /* Heading */],{fontSize:\"xl\",color:\"red.500\",textAlign:\"center\",children:error}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_TextField,{label:\"Friend's name\",placeholder:\"Enter friend's username..\",autoComplete:\"off\",name:\"friendName\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(chakra_ui_modal_esm[\"e\" /* ModalFooter */],{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(chakra_ui_button_esm[\"a\" /* Button */],{colorScheme:\"blue\",type:\"submit\",children:\"Submit\"})})]})})]})]});};/* harmony default export */ var Home_AddFriendModal = (AddFriendModal);\n// CONCATENATED MODULE: ./src/components/Home/Sidebar.jsx\nconst Sidebar=()=>{const{friendList}=Object(react[\"useContext\"])(FriendContext);const{isOpen,onOpen,onClose}=Object(chakra_ui_hooks_esm[\"d\" /* useDisclosure */])();return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(chakra_ui_layout_esm[\"h\" /* VStack */],{py:\"1.4rem\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(chakra_ui_layout_esm[\"e\" /* HStack */],{justify:\"space-evenly\",w:\"100%\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(chakra_ui_layout_esm[\"f\" /* Heading */],{size:\"md\",children:\"Add Friend\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(chakra_ui_button_esm[\"a\" /* Button */],{onClick:onOpen,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(chakra_ui_icons_esm[\"b\" /* ChatIcon */],{})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(chakra_ui_layout_esm[\"b\" /* Divider */],{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(chakra_ui_layout_esm[\"h\" /* VStack */],{as:chakra_ui_tabs_esm[\"b\" /* TabList */],children:friendList.map(friend=>/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(chakra_ui_layout_esm[\"e\" /* HStack */],{as:chakra_ui_tabs_esm[\"a\" /* Tab */],children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(chakra_ui_layout_esm[\"a\" /* Circle */],{bg:\"\"+friend.connected===\"true\"?\"green.700\":\"red.500\",w:\"20px\",h:\"20px\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(chakra_ui_layout_esm[\"g\" /* Text */],{children:friend.username})]},\"friend:\".concat(friend)))})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Home_AddFriendModal,{isOpen:isOpen,onClose:onClose})]});};/* harmony default export */ var Home_Sidebar = (Sidebar);\n// CONCATENATED MODULE: ./src/components/Home/useSocketSetup.jsx\nconst useSocketSetup=(setFriendList,setMessages,socket)=>{const{setUser}=Object(react[\"useContext\"])(AccountContext);Object(react[\"useEffect\"])(()=>{socket.connect();socket.on(\"friends\",friendList=>{setFriendList(friendList);});socket.on(\"messages\",messages=>{setMessages(messages);});socket.on(\"dm\",message=>{setMessages(prevMsgs=>[message,...prevMsgs]);});socket.on(\"connected\",(status,username)=>{setFriendList(prevFriends=>{return[...prevFriends].map(friend=>{if(friend.username===username){friend.connected=status;}return friend;});});});socket.on(\"connect_error\",()=>{setUser({loggedIn:false});});return()=>{socket.off(\"connect_error\");socket.off(\"connected\");socket.off(\"friends\");socket.off(\"messages\");socket.off(\"dm\");};},[setUser,setFriendList,setMessages,socket]);};/* harmony default export */ var Home_useSocketSetup = (useSocketSetup);\n// CONCATENATED MODULE: ./src/components/Home/Home.jsx\nconst FriendContext=/*#__PURE__*/Object(react[\"createContext\"])();const MessagesContext=/*#__PURE__*/Object(react[\"createContext\"])();const SocketContext=/*#__PURE__*/Object(react[\"createContext\"])();const Home=()=>{var _friendList$friendInd;const[friendList,setFriendList]=Object(react[\"useState\"])([]);const[messages,setMessages]=Object(react[\"useState\"])([]);const[friendIndex,setFriendIndex]=Object(react[\"useState\"])(0);const{user}=Object(react[\"useContext\"])(AccountContext);const[socket,setSocket]=Object(react[\"useState\"])(()=>src_socket(user));Object(react[\"useEffect\"])(()=>{setSocket(()=>src_socket(user));},[user]);Home_useSocketSetup(setFriendList,setMessages,socket);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FriendContext.Provider,{value:{friendList,setFriendList},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(SocketContext.Provider,{value:{socket},children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(chakra_ui_layout_esm[\"c\" /* Grid */],{templateColumns:\"repeat(10, 1fr)\",h:\"100vh\",as:chakra_ui_tabs_esm[\"e\" /* Tabs */],onChange:index=>setFriendIndex(index),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(chakra_ui_layout_esm[\"d\" /* GridItem */],{colSpan:\"3\",borderRight:\"1px solid gray\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Home_Sidebar,{})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(chakra_ui_layout_esm[\"d\" /* GridItem */],{colSpan:\"7\",maxH:\"100vh\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(MessagesContext.Provider,{value:{messages,setMessages},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Home_Chat,{userid:(_friendList$friendInd=friendList[friendIndex])===null||_friendList$friendInd===void 0?void 0:_friendList$friendInd.userid})})})]})})});};/* harmony default export */ var Home_Home = (Home);\n// CONCATENATED MODULE: ./src/components/Login/Login.jsx\nconst Login=()=>{const{setUser}=Object(react[\"useContext\"])(AccountContext);const[error,setError]=Object(react[\"useState\"])(null);const navigate=Object(react_router[\"useNavigate\"])();return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(formik_esm[\"c\" /* Formik */],{initialValues:{username:\"\",password:\"\"},validationSchema:common[\"formSchema\"],onSubmit:(values,actions)=>{const vals={...values};actions.resetForm();fetch(\"\".concat(Object({\"NODE_ENV\":\"production\",\"PUBLIC_URL\":\"\",\"WDS_SOCKET_HOST\":undefined,\"WDS_SOCKET_PATH\":undefined,\"WDS_SOCKET_PORT\":undefined,\"FAST_REFRESH\":true}).REACT_APP_SERVER_URL,\"/auth/login\"),{method:\"POST\",credentials:\"include\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(vals)}).catch(err=>{return;}).then(res=>{if(!res||!res.ok||res.status>=400){return;}return res.json();}).then(data=>{if(!data)return;setUser({...data});if(data.status){setError(data.status);}else if(data.loggedIn){localStorage.setItem(\"token\",data.token);navigate(\"/home\");}});},children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(chakra_ui_layout_esm[\"h\" /* VStack */],{as:formik_esm[\"b\" /* Form */],w:{base:\"90%\",md:\"500px\"},m:\"auto\",justify:\"center\",h:\"100vh\",spacing:\"1rem\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(chakra_ui_layout_esm[\"f\" /* Heading */],{children:\"Log In\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(chakra_ui_layout_esm[\"g\" /* Text */],{as:\"p\",color:\"red.500\",children:error}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_TextField,{name:\"username\",placeholder:\"Enter username\",autoComplete:\"off\",label:\"Username\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_TextField,{name:\"password\",placeholder:\"Enter password\",autoComplete:\"off\",label:\"Password\",type:\"password\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(chakra_ui_button_esm[\"b\" /* ButtonGroup */],{pt:\"1rem\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(chakra_ui_button_esm[\"a\" /* Button */],{colorScheme:\"teal\",type:\"submit\",children:\"Log In\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(chakra_ui_button_esm[\"a\" /* Button */],{onClick:()=>navigate(\"/register\"),children:\"Create Account\"})]})]})});};/* harmony default export */ var Login_Login = (Login);\n// CONCATENATED MODULE: ./src/components/Login/SignUp.jsx\nconst SignUp=()=>{const{setUser}=Object(react[\"useContext\"])(AccountContext);const[error,setError]=Object(react[\"useState\"])(null);const navigate=Object(react_router[\"useNavigate\"])();return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(formik_esm[\"c\" /* Formik */],{initialValues:{username:\"\",password:\"\"},validationSchema:common[\"formSchema\"],onSubmit:(values,actions)=>{const vals={...values};actions.resetForm();fetch(\"\".concat(Object({\"NODE_ENV\":\"production\",\"PUBLIC_URL\":\"\",\"WDS_SOCKET_HOST\":undefined,\"WDS_SOCKET_PATH\":undefined,\"WDS_SOCKET_PORT\":undefined,\"FAST_REFRESH\":true}).REACT_APP_SERVER_URL,\"/auth/signup\"),{method:\"POST\",credentials:\"include\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(vals)}).catch(err=>{return;}).then(res=>{if(!res||!res.ok||res.status>=400){return;}return res.json();}).then(data=>{if(!data)return;setUser({...data});if(data.status){setError(data.status);}else if(data.loggedIn){localStorage.setItem(\"token\",data.token);navigate(\"/home\");}});},children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(chakra_ui_layout_esm[\"h\" /* VStack */],{as:formik_esm[\"b\" /* Form */],w:{base:\"90%\",md:\"500px\"},m:\"auto\",justify:\"center\",h:\"100vh\",spacing:\"1rem\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(chakra_ui_layout_esm[\"f\" /* Heading */],{children:\"Sign Up\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(chakra_ui_layout_esm[\"g\" /* Text */],{as:\"p\",color:\"red.500\",children:error}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_TextField,{name:\"username\",placeholder:\"Enter username\",autoComplete:\"off\",label:\"Username\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_TextField,{name:\"password\",placeholder:\"Enter password\",autoComplete:\"off\",label:\"Password\",type:\"password\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(chakra_ui_button_esm[\"b\" /* ButtonGroup */],{pt:\"1rem\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(chakra_ui_button_esm[\"a\" /* Button */],{colorScheme:\"teal\",type:\"submit\",children:\"Create Account\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(chakra_ui_button_esm[\"a\" /* Button */],{onClick:()=>navigate(\"/\"),leftIcon:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(chakra_ui_icons_esm[\"a\" /* ArrowBackIcon */],{}),children:\"Back\"})]})]})});};/* harmony default export */ var Login_SignUp = (SignUp);\n// CONCATENATED MODULE: ./src/components/PrivateRoutes.jsx\nconst{Outlet,Navigate}=__webpack_require__(10);const useAuth=()=>{const{user}=Object(react[\"useContext\"])(AccountContext);return user&&user.loggedIn;};const PrivateRoutes=()=>{const isAuth=useAuth();return isAuth?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Outlet,{}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Navigate,{to:\"/\"});};/* harmony default export */ var components_PrivateRoutes = (PrivateRoutes);\n// CONCATENATED MODULE: ./src/components/Views.jsx\nconst Views=()=>{const{user}=Object(react[\"useContext\"])(AccountContext);return user.loggedIn===null?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(chakra_ui_layout_esm[\"g\" /* Text */],{children:\"Loading...\"}):/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(react_router[\"Routes\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"Route\"],{path:\"/\",element:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Login_Login,{})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"Route\"],{path:\"/register\",element:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Login_SignUp,{})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"Route\"],{element:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_PrivateRoutes,{}),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"Route\"],{path:\"/home\",element:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Home_Home,{})})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"Route\"],{path:\"*\",element:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Login_Login,{})})]});};/* harmony default export */ var components_Views = (Views);\n// CONCATENATED MODULE: ./src/App.js\nfunction App(){return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(components_AccountContext,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_Views,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_ToggleColorMode,{})]});}/* harmony default export */ var src_App = (App);\n// CONCATENATED MODULE: ./src/theme.js\nconst theme={config:{intialColorMode:\"dark\",useSystemColorMode:true},styles:{global:{body:{margin:0,fontFamily:\"-apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen','Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',sans-serif\",WebKitFontSmoothing:\"antialiased\",MozOsxFontSmoothing:\"grayscale\"},code:{fontFamily:\"source-code-pro, Menlo, Monaco, Consolas, 'Courier New',monospace\"}}}};/* harmony default export */ var src_theme = (Object(chakra_ui_react_esm[\"b\" /* extendTheme */])(theme));\n// CONCATENATED MODULE: ./src/index.js\nreact_dom_default.a.render(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_default.a.StrictMode,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"a\" /* HashRouter */],{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(chakra_ui_react_esm[\"a\" /* ChakraProvider */],{theme:src_theme,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(chunk_WP4V2BSL[\"a\" /* ColorModeScript */],{initialColorMode:src_theme.config.initialColorMode}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_App,{})]})})}),document.getElementById(\"root\"));\n\n/***/ }),\n\n/***/ 81:\n/***/ (function(module, exports, __webpack_require__) {\n\nconst Yup = __webpack_require__(115);\nconst formSchema = Yup.object({\n  username: Yup.string().required(\"Username required\").min(6, \"Username too short\").max(28, \"Username too long!\"),\n  password: Yup.string().required(\"Password required\").min(6, \"Password too short\").max(28, \"Password too long!\")\n});\nconst friendSchema = Yup.object({\n  friendName: Yup.string().required(\"Username required\").min(6, \"Invalid username!\").max(28, \"Invalid username!\")\n});\nmodule.exports = {\n  formSchema,\n  friendSchema\n};\n\n/***/ })\n\n},[[330,1,2]]]);","inputSourceMap":{"version":3,"sources":["/Users/apankov/Documents/WEB_Projects/messenger/packages/client/src/components/AccountContext.jsx","/Users/apankov/Documents/WEB_Projects/messenger/packages/client/src/components/ToggleColorMode.jsx","/Users/apankov/Documents/WEB_Projects/messenger/packages/client/src/socket.js","/Users/apankov/Documents/WEB_Projects/messenger/packages/client/src/components/Home/ChatBox.jsx","/Users/apankov/Documents/WEB_Projects/messenger/packages/client/src/components/Home/Chat.jsx","/Users/apankov/Documents/WEB_Projects/messenger/packages/client/src/components/TextField.jsx","/Users/apankov/Documents/WEB_Projects/messenger/packages/client/src/components/Home/AddFriendModal.jsx","/Users/apankov/Documents/WEB_Projects/messenger/packages/client/src/components/Home/Sidebar.jsx","/Users/apankov/Documents/WEB_Projects/messenger/packages/client/src/components/Home/useSocketSetup.jsx","/Users/apankov/Documents/WEB_Projects/messenger/packages/client/src/components/Home/Home.jsx","/Users/apankov/Documents/WEB_Projects/messenger/packages/client/src/components/Login/Login.jsx","/Users/apankov/Documents/WEB_Projects/messenger/packages/client/src/components/Login/SignUp.jsx","/Users/apankov/Documents/WEB_Projects/messenger/packages/client/src/components/PrivateRoutes.jsx","/Users/apankov/Documents/WEB_Projects/messenger/packages/client/src/components/Views.jsx","/Users/apankov/Documents/WEB_Projects/messenger/packages/client/src/App.js","/Users/apankov/Documents/WEB_Projects/messenger/packages/client/src/theme.js","/Users/apankov/Documents/WEB_Projects/messenger/packages/client/src/index.js","/Users/apankov/Documents/WEB_Projects/messenger/packages/common/index.js"],"names":["createContext","useState","useEffect","require","AccountContext","UserContext","_ref","children","user","setUser","loggedIn","token","localStorage","getItem","navigate","useNavigate","fetch","concat","process","REACT_APP_SERVER_URL","credentials","headers","authorization","catch","err","then","r","ok","status","json","data","_jsx","Provider","value","ToggleColorMode","colorMode","toggleColorMode","useColorMode","Button","onClick","pos","top","right","m","SunIcon","color","MoonIcon","socket","io","autoConnect","withCredentials","auth","ChatBox","userid","setMessages","useContext","MessagesContext","SocketContext","Formik","initialValues","message","validationSchema","Yup","min","max","onSubmit","values","actions","to","from","content","emit","prevMsgs","resetForm","_jsxs","HStack","as","Form","w","pb","px","Input","Field","name","placeholder","size","autoComplete","type","colorScheme","Chat","friendList","FriendContext","messages","bottomDiv","useRef","_bottomDiv$current","current","scrollIntoView","length","VStack","h","justify","TabPanels","overflowY","map","friend","flexDir","TabPanel","ref","filter","msg","idx","Text","maxW","fontSize","bg","borderRadius","p","username","pt","textAlign","TextField","label","props","field","meta","useField","FormControl","isInvalid","touched","error","FormLabel","FormErrorMessage","AddFriendModal","isOpen","onClose","setError","closeModal","useCallback","setFriendList","Modal","ModalOverlay","ModalContent","ModalHeader","ModalCloseButton","friendName","_ref2","errorMsg","done","newFriend","c","friendSchema","ModalBody","Heading","ModalFooter","Sidebar","onOpen","useDisclosure","_Fragment","py","ChatIcon","Divider","TabList","Tab","Circle","connected","useSocketSetup","connect","on","prevFriends","off","Home","_friendList$friendInd","friendIndex","setFriendIndex","setSocket","socketConn","Grid","templateColumns","Tabs","onChange","index","GridItem","colSpan","borderRight","maxH","Login","password","formSchema","vals","method","body","JSON","stringify","res","setItem","base","md","spacing","ButtonGroup","SignUp","leftIcon","ArrowBackIcon","Outlet","Navigate","useAuth","PrivateRoutes","isAuth","Views","Routes","Route","path","element","App","theme","config","intialColorMode","useSystemColorMode","styles","global","margin","fontFamily","WebKitFontSmoothing","MozOsxFontSmoothing","code","extendTheme","ReactDOM","render","React","StrictMode","HashRouter","ChakraProvider","ColorModeScript","initialColorMode","document","getElementById","object","string","required","module","exports"],"mappings":"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","file":"x","sourcesContent":["import { useNavigate } from \"react-router\";\n\nconst { createContext, useState, useEffect } = require(\"react\");\n\nexport const AccountContext = createContext();\n\nconst UserContext = ({ children }) => {\n  const [user, setUser] = useState({\n    loggedIn: null,\n    token: localStorage.getItem(\"token\"),\n  });\n  const navigate = useNavigate();\n  useEffect(() => {\n    fetch(`${process.env.REACT_APP_SERVER_URL}/auth/login`, {\n      credentials: \"include\",\n      headers: {\n        authorization: `Bearer ${user.token}`,\n      },\n    })\n      .catch(err => {\n        setUser({ loggedIn: false });\n        return;\n      })\n      .then(r => {\n        if (!r || !r.ok || r.status >= 400) {\n          setUser({ loggedIn: false });\n          return;\n        }\n        return r.json();\n      })\n      .then(data => {\n        if (!data) {\n          setUser({ loggedIn: false });\n          return;\n        }\n        setUser({ ...data });\n        navigate(\"/home\");\n      });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  return (\n    <AccountContext.Provider value={{ user, setUser }}>\n      {children}\n    </AccountContext.Provider>\n  );\n};\n\nexport default UserContext;\n","import { Button } from \"@chakra-ui/button\";\nimport { useColorMode } from \"@chakra-ui/color-mode\";\nimport { MoonIcon, SunIcon } from \"@chakra-ui/icons\";\n\nconst ToggleColorMode = () => {\n  const { colorMode, toggleColorMode } = useColorMode();\n  return (\n    <Button\n      onClick={() => toggleColorMode()}\n      pos=\"absolute\"\n      top=\"0\"\n      right=\"0\"\n      m=\"1rem\"\n    >\n      {colorMode === \"dark\" ? (\n        <SunIcon color=\"orange.200\" />\n      ) : (\n        <MoonIcon color=\"blue.700\" />\n      )}\n    </Button>\n  );\n};\n\nexport default ToggleColorMode;\n","import { io } from \"socket.io-client\";\n\nconst socket = user =>\n  new io(process.env.REACT_APP_SERVER_URL, {\n    autoConnect: false,\n    withCredentials: true,\n    auth: {\n      token: user.token,\n    },\n  });\n\nexport default socket;\n","import { Button } from \"@chakra-ui/button\";\nimport { Input } from \"@chakra-ui/input\";\nimport { HStack } from \"@chakra-ui/layout\";\nimport { Field, Form, Formik } from \"formik\";\nimport { useContext } from \"react\";\nimport * as Yup from \"yup\";\nimport { MessagesContext, SocketContext } from \"./Home\";\n\nconst ChatBox = ({ userid }) => {\n  const { setMessages } = useContext(MessagesContext);\n  const { socket } = useContext(SocketContext);\n  return (\n    <Formik\n      initialValues={{ message: \"\" }}\n      validationSchema={Yup.object({\n        message: Yup.string().min(1).max(255),\n      })}\n      onSubmit={(values, actions) => {\n        const message = { to: userid, from: null, content: values.message };\n        socket.emit(\"dm\", message);\n        setMessages(prevMsgs => [message, ...prevMsgs]);\n        actions.resetForm();\n      }}\n    >\n      <HStack as={Form} w=\"100%\" pb=\"1.4rem\" px=\"1.4rem\">\n        <Input\n          as={Field}\n          name=\"message\"\n          placeholder=\"Type message here..\"\n          size=\"lg\"\n          autoComplete=\"off\"\n        />\n        <Button type=\"submit\" size=\"lg\" colorScheme=\"teal\">\n          Send\n        </Button>\n      </HStack>\n    </Formik>\n  );\n};\n\nexport default ChatBox;\n","import { Text, VStack } from \"@chakra-ui/layout\";\nimport { TabPanel, TabPanels } from \"@chakra-ui/tabs\";\nimport { useContext, useEffect, useRef } from \"react\";\nimport ChatBox from \"./ChatBox\";\nimport { FriendContext, MessagesContext } from \"./Home\";\n\nconst Chat = ({ userid }) => {\n  const { friendList } = useContext(FriendContext);\n  const { messages } = useContext(MessagesContext);\n  const bottomDiv = useRef(null);\n\n  useEffect(() => {\n    bottomDiv.current?.scrollIntoView();\n  });\n\n  return friendList.length > 0 ? (\n    <VStack h=\"100%\" justify=\"end\">\n      <TabPanels overflowY=\"scroll\">\n        {friendList.map(friend => (\n          <VStack\n            flexDir=\"column-reverse\"\n            as={TabPanel}\n            key={`chat:${friend.username}`}\n            w=\"100%\"\n          >\n            <div ref={bottomDiv} />\n            {messages\n              .filter(\n                msg => msg.to === friend.userid || msg.from === friend.userid\n              )\n              .map((message, idx) => (\n                <Text\n                  m={\n                    message.to === friend.userid\n                      ? \"1rem 0 0 auto !important\"\n                      : \"1rem auto 0 0 !important\"\n                  }\n                  maxW=\"50%\"\n                  key={`msg:${friend.username}.${idx}`}\n                  fontSize=\"lg\"\n                  bg={message.to === friend.userid ? \"blue.100\" : \"gray.100\"}\n                  color=\"gray.800\"\n                  borderRadius=\"10px\"\n                  p=\"0.5rem 1rem\"\n                >\n                  {message.content}\n                </Text>\n              ))}\n          </VStack>\n        ))}\n      </TabPanels>\n      <ChatBox userid={userid} />\n    </VStack>\n  ) : (\n    <VStack\n      justify=\"center\"\n      pt=\"5rem\"\n      w=\"100%\"\n      textAlign=\"center\"\n      fontSize=\"lg\"\n    >\n      <TabPanels>\n        <TabPanel>\n          <Text>No friend :( Click add friend to start chatting</Text>\n        </TabPanel>\n      </TabPanels>\n    </VStack>\n  );\n};\n\nexport default Chat;\n","import {\n  FormControl,\n  FormErrorMessage,\n  FormLabel,\n} from \"@chakra-ui/form-control\";\nimport { Input } from \"@chakra-ui/input\";\nimport { Field, useField } from \"formik\";\n\nconst TextField = ({ label, ...props }) => {\n  const [field, meta] = useField(props);\n  return (\n    <FormControl isInvalid={meta.touched && meta.error}>\n      <FormLabel>{label}</FormLabel>\n      <Input as={Field} {...field} {...props} />\n      <FormErrorMessage>{meta.error}</FormErrorMessage>\n    </FormControl>\n  );\n};\n\nexport default TextField;\n","import {\n  Modal,\n  ModalBody,\n  ModalCloseButton,\n  ModalContent,\n  ModalFooter,\n  ModalHeader,\n} from \"@chakra-ui/modal\";\nimport { Button, Heading, ModalOverlay } from \"@chakra-ui/react\";\nimport { friendSchema } from \"@whatsapp-clone/common\";\nimport { Form, Formik } from \"formik\";\nimport { useCallback, useContext, useState } from \"react\";\nimport TextField from \"../TextField\";\nimport { FriendContext, SocketContext } from \"./Home\";\n\nconst AddFriendModal = ({ isOpen, onClose }) => {\n  const [error, setError] = useState(\"\");\n  const closeModal = useCallback(() => {\n    setError(\"\");\n    onClose();\n  }, [onClose]);\n  const { setFriendList } = useContext(FriendContext);\n  const { socket } = useContext(SocketContext);\n  return (\n    <Modal isOpen={isOpen} onClose={closeModal}>\n      <ModalOverlay />\n      <ModalContent>\n        <ModalHeader>Add a friend!</ModalHeader>\n        <ModalCloseButton />\n        <Formik\n          initialValues={{ friendName: \"\" }}\n          onSubmit={values => {\n            socket.emit(\n              \"add_friend\",\n              values.friendName,\n              ({ errorMsg, done, newFriend }) => {\n                if (done) {\n                  setFriendList(c => [newFriend, ...c]);\n                  closeModal();\n                  return;\n                }\n                setError(errorMsg);\n              }\n            );\n          }}\n          validationSchema={friendSchema}\n        >\n          <Form>\n            <ModalBody>\n              <Heading fontSize=\"xl\" color=\"red.500\" textAlign=\"center\">\n                {error}\n              </Heading>\n              <TextField\n                label=\"Friend's name\"\n                placeholder=\"Enter friend's username..\"\n                autoComplete=\"off\"\n                name=\"friendName\"\n              />\n            </ModalBody>\n            <ModalFooter>\n              <Button colorScheme=\"blue\" type=\"submit\">\n                Submit\n              </Button>\n            </ModalFooter>\n          </Form>\n        </Formik>\n      </ModalContent>\n    </Modal>\n  );\n};\n\nexport default AddFriendModal;\n","import { Button } from \"@chakra-ui/button\";\nimport { useDisclosure } from \"@chakra-ui/hooks\";\nimport { ChatIcon } from \"@chakra-ui/icons\";\nimport {\n  Circle,\n  Divider,\n  Heading,\n  HStack,\n  Text,\n  VStack,\n} from \"@chakra-ui/layout\";\nimport { Tab, TabList } from \"@chakra-ui/tabs\";\nimport { useContext } from \"react\";\nimport AddFriendModal from \"./AddFriendModal\";\nimport { FriendContext } from \"./Home\";\n\nconst Sidebar = () => {\n  const { friendList } = useContext(FriendContext);\n  const { isOpen, onOpen, onClose } = useDisclosure();\n  return (\n    <>\n      <VStack py=\"1.4rem\">\n        <HStack justify=\"space-evenly\" w=\"100%\">\n          <Heading size=\"md\">Add Friend</Heading>\n          <Button onClick={onOpen}>\n            <ChatIcon />\n          </Button>\n        </HStack>\n        <Divider />\n        <VStack as={TabList}>\n          {friendList.map(friend => (\n            <HStack as={Tab} key={`friend:${friend}`}>\n              <Circle\n                bg={\n                  \"\" + friend.connected === \"true\" ? \"green.700\" : \"red.500\"\n                }\n                w=\"20px\"\n                h=\"20px\"\n              />\n              <Text>{friend.username}</Text>\n            </HStack>\n          ))}\n        </VStack>\n      </VStack>\n      <AddFriendModal isOpen={isOpen} onClose={onClose} />\n    </>\n  );\n};\n\nexport default Sidebar;\n","import { useContext, useEffect } from \"react\";\nimport { AccountContext } from \"../AccountContext\";\n\nconst useSocketSetup = (setFriendList, setMessages, socket) => {\n  const { setUser } = useContext(AccountContext);\n  useEffect(() => {\n    socket.connect();\n    socket.on(\"friends\", friendList => {\n      setFriendList(friendList);\n    });\n    socket.on(\"messages\", messages => {\n      setMessages(messages);\n    });\n    socket.on(\"dm\", message => {\n      setMessages(prevMsgs => [message, ...prevMsgs]);\n    });\n    socket.on(\"connected\", (status, username) => {\n      setFriendList(prevFriends => {\n        return [...prevFriends].map(friend => {\n          if (friend.username === username) {\n            friend.connected = status;\n          }\n          return friend;\n        });\n      });\n    });\n    socket.on(\"connect_error\", () => {\n      setUser({ loggedIn: false });\n    });\n    return () => {\n      socket.off(\"connect_error\");\n      socket.off(\"connected\");\n      socket.off(\"friends\");\n      socket.off(\"messages\");\n      socket.off(\"dm\");\n    };\n  }, [setUser, setFriendList, setMessages, socket]);\n};\n\nexport default useSocketSetup;\n","import { Grid, GridItem, Tabs } from \"@chakra-ui/react\";\nimport { createContext, useContext, useEffect, useState } from \"react\";\nimport socketConn from \"../../socket\";\nimport { AccountContext } from \"../AccountContext\";\nimport Chat from \"./Chat\";\nimport Sidebar from \"./Sidebar\";\nimport useSocketSetup from \"./useSocketSetup\";\n\nexport const FriendContext = createContext();\nexport const MessagesContext = createContext();\nexport const SocketContext = createContext();\n\nconst Home = () => {\n  const [friendList, setFriendList] = useState([]);\n  const [messages, setMessages] = useState([]);\n  const [friendIndex, setFriendIndex] = useState(0);\n\n  const { user } = useContext(AccountContext);\n  const [socket, setSocket] = useState(() => socketConn(user));\n  useEffect(() => {\n    setSocket(() => socketConn(user));\n  }, [user]);\n  useSocketSetup(setFriendList, setMessages, socket);\n  return (\n    <FriendContext.Provider value={{ friendList, setFriendList }}>\n      <SocketContext.Provider value={{ socket }}>\n        <Grid\n          templateColumns=\"repeat(10, 1fr)\"\n          h=\"100vh\"\n          as={Tabs}\n          onChange={index => setFriendIndex(index)}\n        >\n          <GridItem colSpan=\"3\" borderRight=\"1px solid gray\">\n            <Sidebar />\n          </GridItem>\n          <GridItem colSpan=\"7\" maxH=\"100vh\">\n            <MessagesContext.Provider value={{ messages, setMessages }}>\n              <Chat userid={friendList[friendIndex]?.userid} />\n            </MessagesContext.Provider>\n          </GridItem>\n        </Grid>\n      </SocketContext.Provider>\n    </FriendContext.Provider>\n  );\n};\n\nexport default Home;\n","import {\n  Button,\n  ButtonGroup,\n  Heading,\n  Text,\n  VStack,\n} from \"@chakra-ui/react\";\nimport { formSchema } from \"@whatsapp-clone/common\";\nimport { Form, Formik } from \"formik\";\nimport { useContext, useState } from \"react\";\nimport { useNavigate } from \"react-router\";\nimport { AccountContext } from \"../AccountContext\";\nimport TextField from \"../TextField\";\n\nconst Login = () => {\n  const { setUser } = useContext(AccountContext);\n  const [error, setError] = useState(null);\n  const navigate = useNavigate();\n  return (\n    <Formik\n      initialValues={{ username: \"\", password: \"\" }}\n      validationSchema={formSchema}\n      onSubmit={(values, actions) => {\n        const vals = { ...values };\n        actions.resetForm();\n        fetch(`${process.env.REACT_APP_SERVER_URL}/auth/login`, {\n          method: \"POST\",\n          credentials: \"include\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify(vals),\n        })\n          .catch(err => {\n            return;\n          })\n          .then(res => {\n            if (!res || !res.ok || res.status >= 400) {\n              return;\n            }\n            return res.json();\n          })\n          .then(data => {\n            if (!data) return;\n            setUser({ ...data });\n            if (data.status) {\n              setError(data.status);\n            } else if (data.loggedIn) {\n              localStorage.setItem(\"token\", data.token);\n              navigate(\"/home\");\n            }\n          });\n      }}\n    >\n      <VStack\n        as={Form}\n        w={{ base: \"90%\", md: \"500px\" }}\n        m=\"auto\"\n        justify=\"center\"\n        h=\"100vh\"\n        spacing=\"1rem\"\n      >\n        <Heading>Log In</Heading>\n        <Text as=\"p\" color=\"red.500\">\n          {error}\n        </Text>\n        <TextField\n          name=\"username\"\n          placeholder=\"Enter username\"\n          autoComplete=\"off\"\n          label=\"Username\"\n        />\n\n        <TextField\n          name=\"password\"\n          placeholder=\"Enter password\"\n          autoComplete=\"off\"\n          label=\"Password\"\n          type=\"password\"\n        />\n\n        <ButtonGroup pt=\"1rem\">\n          <Button colorScheme=\"teal\" type=\"submit\">\n            Log In\n          </Button>\n          <Button onClick={() => navigate(\"/register\")}>\n            Create Account\n          </Button>\n        </ButtonGroup>\n      </VStack>\n    </Formik>\n  );\n};\n\nexport default Login;\n","import { ArrowBackIcon } from \"@chakra-ui/icons\";\nimport {\n  Button,\n  ButtonGroup,\n  Heading,\n  Text,\n  VStack,\n} from \"@chakra-ui/react\";\nimport { formSchema } from \"@whatsapp-clone/common\";\nimport { Form, Formik } from \"formik\";\nimport { useContext, useState } from \"react\";\nimport { useNavigate } from \"react-router\";\nimport { AccountContext } from \"../AccountContext\";\nimport TextField from \"../TextField\";\n\nconst SignUp = () => {\n  const { setUser } = useContext(AccountContext);\n  const [error, setError] = useState(null);\n  const navigate = useNavigate();\n  return (\n    <Formik\n      initialValues={{ username: \"\", password: \"\" }}\n      validationSchema={formSchema}\n      onSubmit={(values, actions) => {\n        const vals = { ...values };\n        actions.resetForm();\n        fetch(`${process.env.REACT_APP_SERVER_URL}/auth/signup`, {\n          method: \"POST\",\n          credentials: \"include\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify(vals),\n        })\n          .catch(err => {\n            return;\n          })\n          .then(res => {\n            if (!res || !res.ok || res.status >= 400) {\n              return;\n            }\n            return res.json();\n          })\n          .then(data => {\n            if (!data) return;\n            setUser({ ...data });\n            if (data.status) {\n              setError(data.status);\n            } else if (data.loggedIn) {\n              localStorage.setItem(\"token\", data.token);\n              navigate(\"/home\");\n            }\n          });\n      }}\n    >\n      <VStack\n        as={Form}\n        w={{ base: \"90%\", md: \"500px\" }}\n        m=\"auto\"\n        justify=\"center\"\n        h=\"100vh\"\n        spacing=\"1rem\"\n      >\n        <Heading>Sign Up</Heading>\n        <Text as=\"p\" color=\"red.500\">\n          {error}\n        </Text>\n        <TextField\n          name=\"username\"\n          placeholder=\"Enter username\"\n          autoComplete=\"off\"\n          label=\"Username\"\n        />\n\n        <TextField\n          name=\"password\"\n          placeholder=\"Enter password\"\n          autoComplete=\"off\"\n          label=\"Password\"\n          type=\"password\"\n        />\n\n        <ButtonGroup pt=\"1rem\">\n          <Button colorScheme=\"teal\" type=\"submit\">\n            Create Account\n          </Button>\n          <Button onClick={() => navigate(\"/\")} leftIcon={<ArrowBackIcon />}>\n            Back\n          </Button>\n        </ButtonGroup>\n      </VStack>\n    </Formik>\n  );\n};\n\nexport default SignUp;\n","import { useContext } from \"react\";\nimport { AccountContext } from \"./AccountContext\";\n\nconst { Outlet, Navigate } = require(\"react-router\");\n\nconst useAuth = () => {\n  const { user } = useContext(AccountContext);\n  return user && user.loggedIn;\n};\n\nconst PrivateRoutes = () => {\n  const isAuth = useAuth();\n  return isAuth ? <Outlet /> : <Navigate to=\"/\" />;\n};\n\nexport default PrivateRoutes;\n","import { Text } from \"@chakra-ui/layout\";\nimport { useContext } from \"react\";\nimport { Route, Routes } from \"react-router-dom\";\nimport { AccountContext } from \"./AccountContext\";\nimport Home from \"./Home/Home\";\nimport Login from \"./Login/Login\";\nimport SignUp from \"./Login/SignUp\";\nimport PrivateRoutes from \"./PrivateRoutes\";\n\nconst Views = () => {\n  const { user } = useContext(AccountContext);\n  return user.loggedIn === null ? (\n    <Text>Loading...</Text>\n  ) : (\n    <Routes>\n      <Route path=\"/\" element={<Login />} />\n      <Route path=\"/register\" element={<SignUp />} />\n      <Route element={<PrivateRoutes />}>\n        <Route path=\"/home\" element={<Home />} />\n      </Route>\n      <Route path=\"*\" element={<Login />} />\n    </Routes>\n  );\n};\n\nexport default Views;\n","import UserContext from \"./components/AccountContext\";\nimport ToggleColorMode from \"./components/ToggleColorMode\";\nimport Views from \"./components/Views\";\n\nfunction App() {\n  return (\n    <UserContext>\n      <Views />\n      <ToggleColorMode />\n    </UserContext>\n  );\n}\n\nexport default App;\n","import { extendTheme } from \"@chakra-ui/react\";\n\nconst theme = {\n  config: {\n    intialColorMode: \"dark\",\n    useSystemColorMode: true,\n  },\n  styles: {\n    global: {\n      body: {\n        margin: 0,\n        fontFamily:\n          \"-apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen','Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',sans-serif\",\n        WebKitFontSmoothing: \"antialiased\",\n        MozOsxFontSmoothing: \"grayscale\",\n      },\n\n      code: {\n        fontFamily:\n          \"source-code-pro, Menlo, Monaco, Consolas, 'Courier New',monospace\",\n      },\n    },\n  },\n};\n\nexport default extendTheme(theme);\n","import { ColorModeScript } from \"@chakra-ui/color-mode\";\nimport { ChakraProvider } from \"@chakra-ui/react\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { HashRouter } from \"react-router-dom\";\nimport App from \"./App\";\nimport theme from \"./theme\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <HashRouter>\n      <ChakraProvider theme={theme}>\n        <ColorModeScript initialColorMode={theme.config.initialColorMode} />\n        <App />\n      </ChakraProvider>\n    </HashRouter>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n","const Yup = require(\"yup\");\n\nconst formSchema = Yup.object({\n  username: Yup.string()\n    .required(\"Username required\")\n    .min(6, \"Username too short\")\n    .max(28, \"Username too long!\"),\n  password: Yup.string()\n    .required(\"Password required\")\n    .min(6, \"Password too short\")\n    .max(28, \"Password too long!\"),\n});\n\nconst friendSchema = Yup.object({\n  friendName: Yup.string()\n    .required(\"Username required\")\n    .min(6, \"Invalid username!\")\n    .max(28, \"Invalid username!\"),\n});\n\nmodule.exports = { formSchema, friendSchema };\n"]}}