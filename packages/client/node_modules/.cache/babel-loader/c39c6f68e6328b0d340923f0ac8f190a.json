{"ast":null,"code":"import{Modal,ModalBody,ModalCloseButton,ModalContent,ModalFooter,ModalHeader}from\"@chakra-ui/modal\";import{Button,Heading,ModalOverlay}from\"@chakra-ui/react\";import{friendSchema}from\"@whatsapp-clone/common\";import{Form,Formik}from\"formik\";import{useCallback,useContext,useState}from\"react\";import TextField from\"../TextField\";import{FriendContext,SocketContext}from\"./Home\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AddFriendModal=_ref=>{let{isOpen,onClose}=_ref;const[error,setError]=useState(\"\");const closeModal=useCallback(()=>{setError(\"\");onClose();},[onClose]);const{setFriendList}=useContext(FriendContext);const{socket}=useContext(SocketContext);return/*#__PURE__*/_jsxs(Modal,{isOpen:isOpen,onClose:closeModal,children:[/*#__PURE__*/_jsx(ModalOverlay,{}),/*#__PURE__*/_jsxs(ModalContent,{children:[/*#__PURE__*/_jsx(ModalHeader,{children:\"Add a friend!\"}),/*#__PURE__*/_jsx(ModalCloseButton,{}),/*#__PURE__*/_jsx(Formik,{initialValues:{friendName:\"\"},onSubmit:values=>{socket.emit(\"add_friend\",values.friendName,_ref2=>{let{errorMsg,done,newFriend}=_ref2;if(done){setFriendList(c=>[newFriend,...c]);closeModal();return;}setError(errorMsg);});},validationSchema:friendSchema,children:/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsxs(ModalBody,{children:[/*#__PURE__*/_jsx(Heading,{fontSize:\"xl\",color:\"red.500\",textAlign:\"center\",children:error}),/*#__PURE__*/_jsx(TextField,{label:\"Friend's name\",placeholder:\"Enter friend's username..\",autoComplete:\"off\",name:\"friendName\"})]}),/*#__PURE__*/_jsx(ModalFooter,{children:/*#__PURE__*/_jsx(Button,{colorScheme:\"blue\",type:\"submit\",children:\"Submit\"})})]})})]})]});};export default AddFriendModal;","map":{"version":3,"names":["Modal","ModalBody","ModalCloseButton","ModalContent","ModalFooter","ModalHeader","Button","Heading","ModalOverlay","friendSchema","Form","Formik","useCallback","useContext","useState","TextField","FriendContext","SocketContext","jsx","_jsx","jsxs","_jsxs","AddFriendModal","_ref","isOpen","onClose","error","setError","closeModal","setFriendList","socket","children","initialValues","friendName","onSubmit","values","emit","_ref2","errorMsg","done","newFriend","c","validationSchema","fontSize","color","textAlign","label","placeholder","autoComplete","name","colorScheme","type"],"sources":["/Users/apankov/Documents/WEB_Projects/messenger/packages/client/src/components/Home/AddFriendModal.jsx"],"sourcesContent":["import {\n  Modal,\n  ModalBody,\n  ModalCloseButton,\n  ModalContent,\n  ModalFooter,\n  ModalHeader,\n} from \"@chakra-ui/modal\";\nimport { Button, Heading, ModalOverlay } from \"@chakra-ui/react\";\nimport { friendSchema } from \"@whatsapp-clone/common\";\nimport { Form, Formik } from \"formik\";\nimport { useCallback, useContext, useState } from \"react\";\nimport TextField from \"../TextField\";\nimport { FriendContext, SocketContext } from \"./Home\";\n\nconst AddFriendModal = ({ isOpen, onClose }) => {\n  const [error, setError] = useState(\"\");\n  const closeModal = useCallback(() => {\n    setError(\"\");\n    onClose();\n  }, [onClose]);\n  const { setFriendList } = useContext(FriendContext);\n  const { socket } = useContext(SocketContext);\n  return (\n    <Modal isOpen={isOpen} onClose={closeModal}>\n      <ModalOverlay />\n      <ModalContent>\n        <ModalHeader>Add a friend!</ModalHeader>\n        <ModalCloseButton />\n        <Formik\n          initialValues={{ friendName: \"\" }}\n          onSubmit={values => {\n            socket.emit(\n              \"add_friend\",\n              values.friendName,\n              ({ errorMsg, done, newFriend }) => {\n                if (done) {\n                  setFriendList(c => [newFriend, ...c]);\n                  closeModal();\n                  return;\n                }\n                setError(errorMsg);\n              }\n            );\n          }}\n          validationSchema={friendSchema}\n        >\n          <Form>\n            <ModalBody>\n              <Heading fontSize=\"xl\" color=\"red.500\" textAlign=\"center\">\n                {error}\n              </Heading>\n              <TextField\n                label=\"Friend's name\"\n                placeholder=\"Enter friend's username..\"\n                autoComplete=\"off\"\n                name=\"friendName\"\n              />\n            </ModalBody>\n            <ModalFooter>\n              <Button colorScheme=\"blue\" type=\"submit\">\n                Submit\n              </Button>\n            </ModalFooter>\n          </Form>\n        </Formik>\n      </ModalContent>\n    </Modal>\n  );\n};\n\nexport default AddFriendModal;\n"],"mappings":"AAAA,OACEA,KAAK,CACLC,SAAS,CACTC,gBAAgB,CAChBC,YAAY,CACZC,WAAW,CACXC,WAAW,KACN,kBAAkB,CACzB,OAASC,MAAM,CAAEC,OAAO,CAAEC,YAAY,KAAQ,kBAAkB,CAChE,OAASC,YAAY,KAAQ,wBAAwB,CACrD,OAASC,IAAI,CAAEC,MAAM,KAAQ,QAAQ,CACrC,OAASC,WAAW,CAAEC,UAAU,CAAEC,QAAQ,KAAQ,OAAO,CACzD,MAAO,CAAAC,SAAS,KAAM,cAAc,CACpC,OAASC,aAAa,CAAEC,aAAa,KAAQ,QAAQ,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEtD,KAAM,CAAAC,cAAc,CAAGC,IAAA,EAAyB,IAAxB,CAAEC,MAAM,CAAEC,OAAQ,CAAC,CAAAF,IAAA,CACzC,KAAM,CAACG,KAAK,CAAEC,QAAQ,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAAAc,UAAU,CAAGhB,WAAW,CAAC,IAAM,CACnCe,QAAQ,CAAC,EAAE,CAAC,CACZF,OAAO,CAAC,CAAC,CACX,CAAC,CAAE,CAACA,OAAO,CAAC,CAAC,CACb,KAAM,CAAEI,aAAc,CAAC,CAAGhB,UAAU,CAACG,aAAa,CAAC,CACnD,KAAM,CAAEc,MAAO,CAAC,CAAGjB,UAAU,CAACI,aAAa,CAAC,CAC5C,mBACEI,KAAA,CAACrB,KAAK,EAACwB,MAAM,CAAEA,MAAO,CAACC,OAAO,CAAEG,UAAW,CAAAG,QAAA,eACzCZ,IAAA,CAACX,YAAY,GAAE,CAAC,cAChBa,KAAA,CAAClB,YAAY,EAAA4B,QAAA,eACXZ,IAAA,CAACd,WAAW,EAAA0B,QAAA,CAAC,eAAa,CAAa,CAAC,cACxCZ,IAAA,CAACjB,gBAAgB,GAAE,CAAC,cACpBiB,IAAA,CAACR,MAAM,EACLqB,aAAa,CAAE,CAAEC,UAAU,CAAE,EAAG,CAAE,CAClCC,QAAQ,CAAEC,MAAM,EAAI,CAClBL,MAAM,CAACM,IAAI,CACT,YAAY,CACZD,MAAM,CAACF,UAAU,CACjBI,KAAA,EAAmC,IAAlC,CAAEC,QAAQ,CAAEC,IAAI,CAAEC,SAAU,CAAC,CAAAH,KAAA,CAC5B,GAAIE,IAAI,CAAE,CACRV,aAAa,CAACY,CAAC,EAAI,CAACD,SAAS,CAAE,GAAGC,CAAC,CAAC,CAAC,CACrCb,UAAU,CAAC,CAAC,CACZ,OACF,CACAD,QAAQ,CAACW,QAAQ,CAAC,CACpB,CACF,CAAC,CACH,CAAE,CACFI,gBAAgB,CAAEjC,YAAa,CAAAsB,QAAA,cAE/BV,KAAA,CAACX,IAAI,EAAAqB,QAAA,eACHV,KAAA,CAACpB,SAAS,EAAA8B,QAAA,eACRZ,IAAA,CAACZ,OAAO,EAACoC,QAAQ,CAAC,IAAI,CAACC,KAAK,CAAC,SAAS,CAACC,SAAS,CAAC,QAAQ,CAAAd,QAAA,CACtDL,KAAK,CACC,CAAC,cACVP,IAAA,CAACJ,SAAS,EACR+B,KAAK,CAAC,eAAe,CACrBC,WAAW,CAAC,2BAA2B,CACvCC,YAAY,CAAC,KAAK,CAClBC,IAAI,CAAC,YAAY,CAClB,CAAC,EACO,CAAC,cACZ9B,IAAA,CAACf,WAAW,EAAA2B,QAAA,cACVZ,IAAA,CAACb,MAAM,EAAC4C,WAAW,CAAC,MAAM,CAACC,IAAI,CAAC,QAAQ,CAAApB,QAAA,CAAC,QAEzC,CAAQ,CAAC,CACE,CAAC,EACV,CAAC,CACD,CAAC,EACG,CAAC,EACV,CAAC,CAEZ,CAAC,CAED,cAAe,CAAAT,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module"}