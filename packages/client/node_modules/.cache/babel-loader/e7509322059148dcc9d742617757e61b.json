{"ast":null,"code":"import{ArrowBackIcon}from\"@chakra-ui/icons\";import{Button,ButtonGroup,Heading,Text,VStack}from\"@chakra-ui/react\";import{formSchema}from\"@whatsapp-clone/common\";import{Form,Formik}from\"formik\";import{useContext,useState}from\"react\";import{useNavigate}from\"react-router\";import{AccountContext}from\"../AccountContext\";import TextField from\"../TextField\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SignUp=()=>{const{setUser}=useContext(AccountContext);const[error,setError]=useState(null);const navigate=useNavigate();return/*#__PURE__*/_jsx(Formik,{initialValues:{username:\"\",password:\"\"},validationSchema:formSchema,onSubmit:(values,actions)=>{const vals={...values};actions.resetForm();fetch(\"\".concat(process.env.REACT_APP_SERVER_URL,\"/auth/signup\"),{method:\"POST\",credentials:\"include\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(vals)}).catch(err=>{return;}).then(res=>{if(!res||!res.ok||res.status>=400){return;}return res.json();}).then(data=>{if(!data)return;setUser({...data});if(data.status){setError(data.status);}else if(data.loggedIn){localStorage.setItem(\"token\",data.token);navigate(\"/home\");}});},children:/*#__PURE__*/_jsxs(VStack,{as:Form,w:{base:\"90%\",md:\"500px\"},m:\"auto\",justify:\"center\",h:\"100vh\",spacing:\"1rem\",children:[/*#__PURE__*/_jsx(Heading,{children:\"Sign Up\"}),/*#__PURE__*/_jsx(Text,{as:\"p\",color:\"red.500\",children:error}),/*#__PURE__*/_jsx(TextField,{name:\"username\",placeholder:\"Enter username\",autoComplete:\"off\",label:\"Username\"}),/*#__PURE__*/_jsx(TextField,{name:\"password\",placeholder:\"Enter password\",autoComplete:\"off\",label:\"Password\",type:\"password\"}),/*#__PURE__*/_jsxs(ButtonGroup,{pt:\"1rem\",children:[/*#__PURE__*/_jsx(Button,{colorScheme:\"teal\",type:\"submit\",children:\"Create Account\"}),/*#__PURE__*/_jsx(Button,{onClick:()=>navigate(\"/\"),leftIcon:/*#__PURE__*/_jsx(ArrowBackIcon,{}),children:\"Back\"})]})]})});};export default SignUp;","map":{"version":3,"names":["ArrowBackIcon","Button","ButtonGroup","Heading","Text","VStack","formSchema","Form","Formik","useContext","useState","useNavigate","AccountContext","TextField","jsx","_jsx","jsxs","_jsxs","SignUp","setUser","error","setError","navigate","initialValues","username","password","validationSchema","onSubmit","values","actions","vals","resetForm","fetch","concat","process","env","REACT_APP_SERVER_URL","method","credentials","headers","body","JSON","stringify","catch","err","then","res","ok","status","json","data","loggedIn","localStorage","setItem","token","children","as","w","base","md","m","justify","h","spacing","color","name","placeholder","autoComplete","label","type","pt","colorScheme","onClick","leftIcon"],"sources":["/Users/apankov/Documents/WEB_Projects/messenger/packages/client/src/components/Login/SignUp.jsx"],"sourcesContent":["import { ArrowBackIcon } from \"@chakra-ui/icons\";\nimport {\n  Button,\n  ButtonGroup,\n  Heading,\n  Text,\n  VStack,\n} from \"@chakra-ui/react\";\nimport { formSchema } from \"@whatsapp-clone/common\";\nimport { Form, Formik } from \"formik\";\nimport { useContext, useState } from \"react\";\nimport { useNavigate } from \"react-router\";\nimport { AccountContext } from \"../AccountContext\";\nimport TextField from \"../TextField\";\n\nconst SignUp = () => {\n  const { setUser } = useContext(AccountContext);\n  const [error, setError] = useState(null);\n  const navigate = useNavigate();\n  return (\n    <Formik\n      initialValues={{ username: \"\", password: \"\" }}\n      validationSchema={formSchema}\n      onSubmit={(values, actions) => {\n        const vals = { ...values };\n        actions.resetForm();\n        fetch(`${process.env.REACT_APP_SERVER_URL}/auth/signup`, {\n          method: \"POST\",\n          credentials: \"include\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify(vals),\n        })\n          .catch(err => {\n            return;\n          })\n          .then(res => {\n            if (!res || !res.ok || res.status >= 400) {\n              return;\n            }\n            return res.json();\n          })\n          .then(data => {\n            if (!data) return;\n            setUser({ ...data });\n            if (data.status) {\n              setError(data.status);\n            } else if (data.loggedIn) {\n              localStorage.setItem(\"token\", data.token);\n              navigate(\"/home\");\n            }\n          });\n      }}\n    >\n      <VStack\n        as={Form}\n        w={{ base: \"90%\", md: \"500px\" }}\n        m=\"auto\"\n        justify=\"center\"\n        h=\"100vh\"\n        spacing=\"1rem\"\n      >\n        <Heading>Sign Up</Heading>\n        <Text as=\"p\" color=\"red.500\">\n          {error}\n        </Text>\n        <TextField\n          name=\"username\"\n          placeholder=\"Enter username\"\n          autoComplete=\"off\"\n          label=\"Username\"\n        />\n\n        <TextField\n          name=\"password\"\n          placeholder=\"Enter password\"\n          autoComplete=\"off\"\n          label=\"Password\"\n          type=\"password\"\n        />\n\n        <ButtonGroup pt=\"1rem\">\n          <Button colorScheme=\"teal\" type=\"submit\">\n            Create Account\n          </Button>\n          <Button onClick={() => navigate(\"/\")} leftIcon={<ArrowBackIcon />}>\n            Back\n          </Button>\n        </ButtonGroup>\n      </VStack>\n    </Formik>\n  );\n};\n\nexport default SignUp;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}