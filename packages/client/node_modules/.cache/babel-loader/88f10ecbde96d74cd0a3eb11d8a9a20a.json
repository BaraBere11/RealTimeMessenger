{"ast":null,"code":"import{Text,VStack}from\"@chakra-ui/layout\";import{TabPanel,TabPanels}from\"@chakra-ui/tabs\";import{useContext,useEffect,useRef}from\"react\";import ChatBox from\"./ChatBox\";import{FriendContext,MessagesContext}from\"./Home\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Chat=_ref=>{let{userid}=_ref;const{friendList}=useContext(FriendContext);const{messages}=useContext(MessagesContext);const bottomDiv=useRef(null);useEffect(()=>{var _bottomDiv$current;(_bottomDiv$current=bottomDiv.current)===null||_bottomDiv$current===void 0?void 0:_bottomDiv$current.scrollIntoView();});return friendList.length>0?/*#__PURE__*/_jsxs(VStack,{h:\"100%\",justify:\"end\",children:[/*#__PURE__*/_jsx(TabPanels,{overflowY:\"scroll\",children:friendList.map(friend=>/*#__PURE__*/_jsxs(VStack,{flexDir:\"column-reverse\",as:TabPanel,w:\"100%\",children:[/*#__PURE__*/_jsx(\"div\",{ref:bottomDiv}),messages.filter(msg=>msg.to===friend.userid||msg.from===friend.userid).map((message,idx)=>/*#__PURE__*/_jsx(Text,{m:message.to===friend.userid?\"1rem 0 0 auto !important\":\"1rem auto 0 0 !important\",maxW:\"50%\",fontSize:\"lg\",bg:message.to===friend.userid?\"blue.100\":\"gray.100\",color:\"gray.800\",borderRadius:\"10px\",p:\"0.5rem 1rem\",children:message.content},\"msg:\".concat(friend.username,\".\").concat(idx)))]},\"chat:\".concat(friend.username)))}),/*#__PURE__*/_jsx(ChatBox,{userid:userid})]}):/*#__PURE__*/_jsx(VStack,{justify:\"center\",pt:\"5rem\",w:\"100%\",textAlign:\"center\",fontSize:\"lg\",children:/*#__PURE__*/_jsx(TabPanels,{children:/*#__PURE__*/_jsx(TabPanel,{children:/*#__PURE__*/_jsx(Text,{children:\"No friend :( Click add friend to start chatting\"})})})});};export default Chat;","map":{"version":3,"names":["Text","VStack","TabPanel","TabPanels","useContext","useEffect","useRef","ChatBox","FriendContext","MessagesContext","jsx","_jsx","jsxs","_jsxs","Chat","_ref","userid","friendList","messages","bottomDiv","_bottomDiv$current","current","scrollIntoView","length","h","justify","children","overflowY","map","friend","flexDir","as","w","ref","filter","msg","to","from","message","idx","m","maxW","fontSize","bg","color","borderRadius","p","content","concat","username","pt","textAlign"],"sources":["/Users/apankov/Documents/WEB_Projects/messenger/packages/client/src/components/Home/Chat.jsx"],"sourcesContent":["import { Text, VStack } from \"@chakra-ui/layout\";\nimport { TabPanel, TabPanels } from \"@chakra-ui/tabs\";\nimport { useContext, useEffect, useRef } from \"react\";\nimport ChatBox from \"./ChatBox\";\nimport { FriendContext, MessagesContext } from \"./Home\";\n\nconst Chat = ({ userid }) => {\n  const { friendList } = useContext(FriendContext);\n  const { messages } = useContext(MessagesContext);\n  const bottomDiv = useRef(null);\n\n  useEffect(() => {\n    bottomDiv.current?.scrollIntoView();\n  });\n\n  return friendList.length > 0 ? (\n    <VStack h=\"100%\" justify=\"end\">\n      <TabPanels overflowY=\"scroll\">\n        {friendList.map(friend => (\n          <VStack\n            flexDir=\"column-reverse\"\n            as={TabPanel}\n            key={`chat:${friend.username}`}\n            w=\"100%\"\n          >\n            <div ref={bottomDiv} />\n            {messages\n              .filter(\n                msg => msg.to === friend.userid || msg.from === friend.userid\n              )\n              .map((message, idx) => (\n                <Text\n                  m={\n                    message.to === friend.userid\n                      ? \"1rem 0 0 auto !important\"\n                      : \"1rem auto 0 0 !important\"\n                  }\n                  maxW=\"50%\"\n                  key={`msg:${friend.username}.${idx}`}\n                  fontSize=\"lg\"\n                  bg={message.to === friend.userid ? \"blue.100\" : \"gray.100\"}\n                  color=\"gray.800\"\n                  borderRadius=\"10px\"\n                  p=\"0.5rem 1rem\"\n                >\n                  {message.content}\n                </Text>\n              ))}\n          </VStack>\n        ))}\n      </TabPanels>\n      <ChatBox userid={userid} />\n    </VStack>\n  ) : (\n    <VStack\n      justify=\"center\"\n      pt=\"5rem\"\n      w=\"100%\"\n      textAlign=\"center\"\n      fontSize=\"lg\"\n    >\n      <TabPanels>\n        <TabPanel>\n          <Text>No friend :( Click add friend to start chatting</Text>\n        </TabPanel>\n      </TabPanels>\n    </VStack>\n  );\n};\n\nexport default Chat;\n"],"mappings":"AAAA,OAASA,IAAI,CAAEC,MAAM,KAAQ,mBAAmB,CAChD,OAASC,QAAQ,CAAEC,SAAS,KAAQ,iBAAiB,CACrD,OAASC,UAAU,CAAEC,SAAS,CAAEC,MAAM,KAAQ,OAAO,CACrD,MAAO,CAAAC,OAAO,KAAM,WAAW,CAC/B,OAASC,aAAa,CAAEC,eAAe,KAAQ,QAAQ,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAExD,KAAM,CAAAC,IAAI,CAAGC,IAAA,EAAgB,IAAf,CAAEC,MAAO,CAAC,CAAAD,IAAA,CACtB,KAAM,CAAEE,UAAW,CAAC,CAAGb,UAAU,CAACI,aAAa,CAAC,CAChD,KAAM,CAAEU,QAAS,CAAC,CAAGd,UAAU,CAACK,eAAe,CAAC,CAChD,KAAM,CAAAU,SAAS,CAAGb,MAAM,CAAC,IAAI,CAAC,CAE9BD,SAAS,CAAC,IAAM,KAAAe,kBAAA,CACd,CAAAA,kBAAA,CAAAD,SAAS,CAACE,OAAO,UAAAD,kBAAA,iBAAjBA,kBAAA,CAAmBE,cAAc,CAAC,CAAC,CACrC,CAAC,CAAC,CAEF,MAAO,CAAAL,UAAU,CAACM,MAAM,CAAG,CAAC,cAC1BV,KAAA,CAACZ,MAAM,EAACuB,CAAC,CAAC,MAAM,CAACC,OAAO,CAAC,KAAK,CAAAC,QAAA,eAC5Bf,IAAA,CAACR,SAAS,EAACwB,SAAS,CAAC,QAAQ,CAAAD,QAAA,CAC1BT,UAAU,CAACW,GAAG,CAACC,MAAM,eACpBhB,KAAA,CAACZ,MAAM,EACL6B,OAAO,CAAC,gBAAgB,CACxBC,EAAE,CAAE7B,QAAS,CAEb8B,CAAC,CAAC,MAAM,CAAAN,QAAA,eAERf,IAAA,QAAKsB,GAAG,CAAEd,SAAU,CAAE,CAAC,CACtBD,QAAQ,CACNgB,MAAM,CACLC,GAAG,EAAIA,GAAG,CAACC,EAAE,GAAKP,MAAM,CAACb,MAAM,EAAImB,GAAG,CAACE,IAAI,GAAKR,MAAM,CAACb,MACzD,CAAC,CACAY,GAAG,CAAC,CAACU,OAAO,CAAEC,GAAG,gBAChB5B,IAAA,CAACX,IAAI,EACHwC,CAAC,CACCF,OAAO,CAACF,EAAE,GAAKP,MAAM,CAACb,MAAM,CACxB,0BAA0B,CAC1B,0BACL,CACDyB,IAAI,CAAC,KAAK,CAEVC,QAAQ,CAAC,IAAI,CACbC,EAAE,CAAEL,OAAO,CAACF,EAAE,GAAKP,MAAM,CAACb,MAAM,CAAG,UAAU,CAAG,UAAW,CAC3D4B,KAAK,CAAC,UAAU,CAChBC,YAAY,CAAC,MAAM,CACnBC,CAAC,CAAC,aAAa,CAAApB,QAAA,CAEdY,OAAO,CAACS,OAAO,SAAAC,MAAA,CAPJnB,MAAM,CAACoB,QAAQ,MAAAD,MAAA,CAAIT,GAAG,CAQ9B,CACP,CAAC,WAAAS,MAAA,CAzBSnB,MAAM,CAACoB,QAAQ,CA0BtB,CACT,CAAC,CACO,CAAC,cACZtC,IAAA,CAACJ,OAAO,EAACS,MAAM,CAAEA,MAAO,CAAE,CAAC,EACrB,CAAC,cAETL,IAAA,CAACV,MAAM,EACLwB,OAAO,CAAC,QAAQ,CAChByB,EAAE,CAAC,MAAM,CACTlB,CAAC,CAAC,MAAM,CACRmB,SAAS,CAAC,QAAQ,CAClBT,QAAQ,CAAC,IAAI,CAAAhB,QAAA,cAEbf,IAAA,CAACR,SAAS,EAAAuB,QAAA,cACRf,IAAA,CAACT,QAAQ,EAAAwB,QAAA,cACPf,IAAA,CAACX,IAAI,EAAA0B,QAAA,CAAC,iDAA+C,CAAM,CAAC,CACpD,CAAC,CACF,CAAC,CACN,CACT,CACH,CAAC,CAED,cAAe,CAAAZ,IAAI","ignoreList":[]},"metadata":{},"sourceType":"module"}