{"ast":null,"code":"import{Grid,GridItem,Tabs}from\"@chakra-ui/react\";import{createContext,useContext,useEffect,useState}from\"react\";import socketConn from\"../../socket\";import{AccountContext}from\"../AccountContext\";import Chat from\"./Chat\";import Sidebar from\"./Sidebar\";import useSocketSetup from\"./useSocketSetup\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const FriendContext=/*#__PURE__*/createContext();export const MessagesContext=/*#__PURE__*/createContext();export const SocketContext=/*#__PURE__*/createContext();const Home=()=>{var _friendList$friendInd;const[friendList,setFriendList]=useState([]);const[messages,setMessages]=useState([]);const[friendIndex,setFriendIndex]=useState(0);const{user}=useContext(AccountContext);const[socket,setSocket]=useState(()=>socketConn(user));useEffect(()=>{setSocket(()=>socketConn(user));},[user]);useSocketSetup(setFriendList,setMessages,socket);return/*#__PURE__*/_jsx(FriendContext.Provider,{value:{friendList,setFriendList},children:/*#__PURE__*/_jsx(SocketContext.Provider,{value:{socket},children:/*#__PURE__*/_jsxs(Grid,{templateColumns:\"repeat(10, 1fr)\",h:\"100vh\",as:Tabs,onChange:index=>setFriendIndex(index),children:[/*#__PURE__*/_jsx(GridItem,{colSpan:\"3\",borderRight:\"1px solid gray\",children:/*#__PURE__*/_jsx(Sidebar,{})}),/*#__PURE__*/_jsx(GridItem,{colSpan:\"7\",maxH:\"100vh\",children:/*#__PURE__*/_jsx(MessagesContext.Provider,{value:{messages,setMessages},children:/*#__PURE__*/_jsx(Chat,{userid:(_friendList$friendInd=friendList[friendIndex])===null||_friendList$friendInd===void 0?void 0:_friendList$friendInd.userid})})})]})})});};export default Home;","map":{"version":3,"names":["Grid","GridItem","Tabs","createContext","useContext","useEffect","useState","socketConn","AccountContext","Chat","Sidebar","useSocketSetup","jsx","_jsx","jsxs","_jsxs","FriendContext","MessagesContext","SocketContext","Home","_friendList$friendInd","friendList","setFriendList","messages","setMessages","friendIndex","setFriendIndex","user","socket","setSocket","Provider","value","children","templateColumns","h","as","onChange","index","colSpan","borderRight","maxH","userid"],"sources":["/Users/apankov/Documents/WEB_Projects/messenger/packages/client/src/components/Home/Home.jsx"],"sourcesContent":["import { Grid, GridItem, Tabs } from \"@chakra-ui/react\";\nimport { createContext, useContext, useEffect, useState } from \"react\";\nimport socketConn from \"../../socket\";\nimport { AccountContext } from \"../AccountContext\";\nimport Chat from \"./Chat\";\nimport Sidebar from \"./Sidebar\";\nimport useSocketSetup from \"./useSocketSetup\";\n\nexport const FriendContext = createContext();\nexport const MessagesContext = createContext();\nexport const SocketContext = createContext();\n\nconst Home = () => {\n  const [friendList, setFriendList] = useState([]);\n  const [messages, setMessages] = useState([]);\n  const [friendIndex, setFriendIndex] = useState(0);\n\n  const { user } = useContext(AccountContext);\n  const [socket, setSocket] = useState(() => socketConn(user));\n  useEffect(() => {\n    setSocket(() => socketConn(user));\n  }, [user]);\n  useSocketSetup(setFriendList, setMessages, socket);\n  return (\n    <FriendContext.Provider value={{ friendList, setFriendList }}>\n      <SocketContext.Provider value={{ socket }}>\n        <Grid\n          templateColumns=\"repeat(10, 1fr)\"\n          h=\"100vh\"\n          as={Tabs}\n          onChange={index => setFriendIndex(index)}\n        >\n          <GridItem colSpan=\"3\" borderRight=\"1px solid gray\">\n            <Sidebar />\n          </GridItem>\n          <GridItem colSpan=\"7\" maxH=\"100vh\">\n            <MessagesContext.Provider value={{ messages, setMessages }}>\n              <Chat userid={friendList[friendIndex]?.userid} />\n            </MessagesContext.Provider>\n          </GridItem>\n        </Grid>\n      </SocketContext.Provider>\n    </FriendContext.Provider>\n  );\n};\n\nexport default Home;\n"],"mappings":"AAAA,OAASA,IAAI,CAAEC,QAAQ,CAAEC,IAAI,KAAQ,kBAAkB,CACvD,OAASC,aAAa,CAAEC,UAAU,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CACtE,MAAO,CAAAC,UAAU,KAAM,cAAc,CACrC,OAASC,cAAc,KAAQ,mBAAmB,CAClD,MAAO,CAAAC,IAAI,KAAM,QAAQ,CACzB,MAAO,CAAAC,OAAO,KAAM,WAAW,CAC/B,MAAO,CAAAC,cAAc,KAAM,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE9C,MAAO,MAAM,CAAAC,aAAa,cAAGb,aAAa,CAAC,CAAC,CAC5C,MAAO,MAAM,CAAAc,eAAe,cAAGd,aAAa,CAAC,CAAC,CAC9C,MAAO,MAAM,CAAAe,aAAa,cAAGf,aAAa,CAAC,CAAC,CAE5C,KAAM,CAAAgB,IAAI,CAAGA,CAAA,GAAM,KAAAC,qBAAA,CACjB,KAAM,CAACC,UAAU,CAAEC,aAAa,CAAC,CAAGhB,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAACiB,QAAQ,CAAEC,WAAW,CAAC,CAAGlB,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACmB,WAAW,CAAEC,cAAc,CAAC,CAAGpB,QAAQ,CAAC,CAAC,CAAC,CAEjD,KAAM,CAAEqB,IAAK,CAAC,CAAGvB,UAAU,CAACI,cAAc,CAAC,CAC3C,KAAM,CAACoB,MAAM,CAAEC,SAAS,CAAC,CAAGvB,QAAQ,CAAC,IAAMC,UAAU,CAACoB,IAAI,CAAC,CAAC,CAC5DtB,SAAS,CAAC,IAAM,CACdwB,SAAS,CAAC,IAAMtB,UAAU,CAACoB,IAAI,CAAC,CAAC,CACnC,CAAC,CAAE,CAACA,IAAI,CAAC,CAAC,CACVhB,cAAc,CAACW,aAAa,CAAEE,WAAW,CAAEI,MAAM,CAAC,CAClD,mBACEf,IAAA,CAACG,aAAa,CAACc,QAAQ,EAACC,KAAK,CAAE,CAAEV,UAAU,CAAEC,aAAc,CAAE,CAAAU,QAAA,cAC3DnB,IAAA,CAACK,aAAa,CAACY,QAAQ,EAACC,KAAK,CAAE,CAAEH,MAAO,CAAE,CAAAI,QAAA,cACxCjB,KAAA,CAACf,IAAI,EACHiC,eAAe,CAAC,iBAAiB,CACjCC,CAAC,CAAC,OAAO,CACTC,EAAE,CAAEjC,IAAK,CACTkC,QAAQ,CAAEC,KAAK,EAAIX,cAAc,CAACW,KAAK,CAAE,CAAAL,QAAA,eAEzCnB,IAAA,CAACZ,QAAQ,EAACqC,OAAO,CAAC,GAAG,CAACC,WAAW,CAAC,gBAAgB,CAAAP,QAAA,cAChDnB,IAAA,CAACH,OAAO,GAAE,CAAC,CACH,CAAC,cACXG,IAAA,CAACZ,QAAQ,EAACqC,OAAO,CAAC,GAAG,CAACE,IAAI,CAAC,OAAO,CAAAR,QAAA,cAChCnB,IAAA,CAACI,eAAe,CAACa,QAAQ,EAACC,KAAK,CAAE,CAAER,QAAQ,CAAEC,WAAY,CAAE,CAAAQ,QAAA,cACzDnB,IAAA,CAACJ,IAAI,EAACgC,MAAM,EAAArB,qBAAA,CAAEC,UAAU,CAACI,WAAW,CAAC,UAAAL,qBAAA,iBAAvBA,qBAAA,CAAyBqB,MAAO,CAAE,CAAC,CACzB,CAAC,CACnB,CAAC,EACP,CAAC,CACe,CAAC,CACH,CAAC,CAE7B,CAAC,CAED,cAAe,CAAAtB,IAAI","ignoreList":[]},"metadata":{},"sourceType":"module"}